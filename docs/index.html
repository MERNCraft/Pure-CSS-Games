<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta
name="viewport"
content="width=device-width, initial-scale=1.0"
>
<title>Pure CSS Games</title>
<link rel="stylesheet" href="../public/styles.css">
<link rel="stylesheet" href="../public/media-queries.css">
<link rel="stylesheet" href="../public/prism/prism.css">

<script defer src="../public/prism/prism.js"></script>
<script defer src="../public/storage.js"></script>
<script defer src="../public/script.js"></script>
</head>

<body>
<main id="main">
<header>
<a href="https://MERNCraft.github.io"><img src="../public/svg/home.svg" alt="home"></a>
<h1>Pure CSS Games</h1>
<h3>1: Using CSS counters in creative ways</h3>
<h4>January 2025</h4>
</header>

<!-- Starting With Questions -->
<section id="starting-with-questions" aria-labelledby="starting-with-questions" data-item="Asking Questions">
<h2>
<a href="#starting-with-questions">Starting With Questions</a>
</h2>
<p>Before you start, you can play a little with the CSS-only activities
below. Ask yourself these questions:</p>
<ul>
<li>How can I create a countdown timer in CSS?</li>
<li>How can I calculate a score in CSS?</li>
<li>How is a counter used for the <em>letters</em> in the word
game?</li>
<li>CSS can do arithmetic?</li>
<li>Yes, OK, it has <code>calc()</code>, but how can I get it to show me
the results?</li>
<li>How do I cycle through all the numbers, using a single button?</li>
<li>Really!? I can use <em>counters</em> to animate emojis? How soon can
I use that in a project?</li>
<li>How does a counter know where the mouse is?</li>
</ul>
<p>If you start with questions, each time you find an answer, you get a
little buzz of satisfaction. It’s like with jokes. If you hear the
punchline first, you might think: “When am I ever going to need an
answer like this?” If you hear the build-up first, the punchline becomes
something you want to share with your friends.</p>
<p>These are not all complete games or puzzles. You can think of them as
illustrations of the concepts that you will be reading more about
below.</p>
<iframe id="iframe-word" title="Word" width="300" height="150" src="https://merncraft.github.io/word/">
</iframe>
<iframe id="iframe-calc" title="Calculator" width="300" height="150" src="https://merncraft.github.io/calc">
</iframe>
<iframe id="iframe-spin" title="Spin" width="300" height="150" src="https://merncraft.github.io/spin">
</iframe>
<iframe id="iframe-map" title="Map" width="300" height="150" src="https://merncraft.github.io/map">
</iframe>
<p>You might also have other questions, like:</p>
<ul>
<li>How do I detect when the player has won?</li>
<li>How do I stop the game when the player’s time runs out?</li>
<li>How do I make an animation glitch?</li>
<li>How do I ensure that whichever button the player clicks last behaves
differently from the others?</li>
<li>Must I solve the word game to find a link to the repo?</li>
<li>How do I create that neat revolving reel animation?</li>
</ul>
<p>Keep these questions in mind. You’ll find answers to them in
forthcoming tutorials… unless you can create good <del>punchlines</del>
answers for yourself first : )</p>
</section>
<!-- What You Already Know -->
<section id="what-you-already-know" aria-labelledby="what-you-already-know" data-item="Prerequisites">
<h2>
<a href="#what-you-already-know">What I expect you to know already</a>
</h2>
<p>I’m assuming that you already:</p>
<ul>
<li>Know how to create an HTML page and link a CSS file to it</li>
<li>Understand how to write CSS selectors</li>
<li>Know how to structure <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_nesting/Using_CSS_nesting">nested
CSS</a>.</li>
</ul>
<details class="tldr">
<summary>
Nested CSS
</summary>
<p>Nested CSS has been <a
href="https://caniuse.com/?search=nested%20css">available in all major
browsers since December 2023</a>, and it’s available to over 80% of all
users, so it should work in your development browser. It allows me to
write shorter CSS code.</p>
<p>Here’s an example of how I use nested CSS to create numbered
links:</p>
<pre class="language-css"><code class="language-css">ol {
  list-style-type: none;
  counter-reset: item 0;

  li {
    margin: 0.5em;
    border: 1px solid black;
  
    a {
      color: inherit;
      text-decoration: none;
      display: inline-block;
      padding: 0.5em;
      width: 100%;
      box-sizing: border-box;

      &::before {
        counter-increment: item 1;
        content: counter(item) ". ";
      }

      &:hover {
        text-decoration: underline;
      }
    }
  }
}</code></pre>
<p>The result would look something like this:</p>
<figure>
<img src="images/nestedCSS.webp"
alt="An ordered list containing numbered links" />
<figcaption aria-hidden="true">An ordered list containing numbered
links</figcaption>
</figure>
<p>The nested CSS above will be treated exactly as if it were written in
this standard expanded format:</p>
<pre class="language-css"><code class="language-css">ol {
  list-style-type: none;
  counter-reset: item 0;
}
ol li {
  margin: 0.5em;
  border: 1px solid black;
}
ol li a {
  color: inherit;
  text-decoration: none;
  display: inline-block;
  padding: 0.5em;
  width: 100%;
  box-sizing: border-box;
}
ol li a::before {
  counter-increment: item 1;
  content: counter(item) ". ";
}
ol li a:hover {
  text-decoration: underline;
}</code></pre>
</details>
<h2 id="what-you-might-not-know-yet">What you might not know yet</h2>
<p>If you don’t yet know about the recently-introduced <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has"><code>:has()</code>
pseudo-class</a>, don’t worry. You’ll see plenty of examples on how to
use it.</p>
</section>
<!-- Learning to Count -->
<section id="learning-to-count" aria-labelledby="learning-to-count" data-item="Learning To Count">
<h2>
<a href="#learning-to-count">Learning To Count</a>
</h2>
<h3 id="the-origin-story-ordered-lists">The Origin Story: ordered
lists</h3>
<p>If you create an <code>&lt;ol&gt;</code> ordered list, your browser
will automatically number the lines. Try it:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;h1&gt;TO DO LIST&lt;/h1&gt;
&lt;ol&gt;
  &lt;li&gt;Buy a tortoise&lt;/li&gt;
  &lt;li&gt;Call it 'The Speed of Light'&lt;/li&gt;
  &lt;li&gt;Tell people I can run faster than The Speed of Light&lt;/li&gt;
&lt;/ol&gt;</code></pre>
<p>You can change the number that the list starts with by using the
<code>start</code> attribute in your HTML:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;ol start="10"&gt;
  &lt;li&gt;Buy a tortoise&lt;/li&gt;
  &lt;li&gt;Call it 'The Speed of Light'&lt;/li&gt;
  &lt;li&gt;Tell people I can run faster than The Speed of Light&lt;/li&gt;
&lt;/ol&gt;</code></pre>
<figure>
<img src="images/ol.webp" alt="using &lt;ol start=&quot;10&quot;&gt;" />
<figcaption aria-hidden="true">using
<code>&lt;ol start="10"&gt;</code></figcaption>
</figure>
<p>This works because under the hood, the browser uses a <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_counter_styles/Using_CSS_counters">counter</a>
called <code>list-item</code>. You can control this counter through CSS.
With the following rule, all your <code>&lt;ol&gt;</code> elements will
start from <code>101</code>… even those where you set the
<code>start</code> property in your HTML file. The <code>counter</code>
property takes precedence…</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">ol {
  counter-set: list-item 101;
}</code></pre>
<details class="warn" open>
<summary>
or rather: “<em>should</em> take precedence”
</summary>
<p>… except that since Google released Chromium 126 on 11 June 2024,
this use of <code>list-item</code> is broken in Webkit browsers such as
Google Chrome, Opera and Microsoft Edge. It still works in Firefox and
Safari, so you can test it there. It’s not a big deal, because you won’t
need to use exactly this feature for anything in your CSS-only games.
It’s just nice to know that ordered <code>&lt;ol&gt;</code> lists were
where the <code>counter</code> feature came from.</p>
</details>
</section>
<!-- Free for All -->
<section id="free-for-all" aria-labelledby="free-for-all" data-item="Free For All">
<h2>
<a href="#free-for-all">Free For All</a>
</h2>
<p>Ordered lists don’t claim exclusive rights over counters. Browsers
make counters available to any element. They give you full control of
any kind of numbering process. Here’s what an ordered list does
naturally:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;ol&gt;
  &lt;li&gt;For the money&lt;/li&gt;
  &lt;li&gt;For the show&lt;/li&gt;
  &lt;li&gt;To get ready and go cat go&lt;/li&gt;
&lt;/ol&gt;</code></pre>
<figure>
<img src="images/ol_go-cat-go.webp"
alt="Standard numbering with an ordered list" />
<figcaption aria-hidden="true">Standard numbering with an ordered
list</figcaption>
</figure>
<p>Here’s how you could create a similar (not identical) result using a
<code>&lt;ul&gt;</code> unordered list.</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;ul&gt;
  &lt;li&gt;For the money&lt;/li&gt;
  &lt;li&gt;For the show&lt;/li&gt;
  &lt;li&gt;To get ready and go cat go&lt;/li&gt;
&lt;/ul&gt;</code></pre>
<pre class="language-css line-numbers"><code class="language-css line-numbers">ul {
  list-style-type: none;
  counter-set: item;

  li {
    counter-increment: item;
  }

  li::before {
    content: "Item " counter(item) ". ";
  }
}</code></pre>
<p>Here’s what happens:</p>
<ul>
<li>The CSS elves see that a <code>counter</code> called
<code>item</code> has been set for the <code>&lt;ul&gt;</code>
element.</li>
<li>By default, they give it the value <code>0</code>.</li>
<li>They apply the rule <code>counter-increment: item</code> each time
they meet a new <code>&lt;li&gt;</code> item in the list where the
<code>item</code> counter was set.</li>
<li>They then read the current value of <code>counter(item)</code> and
use this number as the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/content"><code>content</code></a>
of the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/::before"><code>::before</code></a>
pseudo-element.</li>
<li>They apply the decorations <code>Item</code> and <code>.</code>
around the counter</li>
</ul>
<figure>
<img src="images/go-cat-go.webp" alt="numbered unordered list" />
<figcaption aria-hidden="true">numbered unordered list</figcaption>
</figure>
<details class="note" open>
<summary>
Summary
</summary>
<p>Note that <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/content#syntax">you
can provide several items</a> in the value for the <code>content</code>
attribute, like <code>"Item " counter(item) ". "</code>, and the CSS
elves will concatenate them together for you.</p>
</details>
<details class="warn" open>
<summary>
Summary
</summary>
<p>Note that I use <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/counter-set"><code>counter-set</code></a>
and not <code>counter-reset</code>, because the current version of
Firefox (128.0.3) does not always handle <code>counter-reset</code> as
you would expect it to.</p>
</details>
</section>
<section id="seeing-how-css-works" aria-labelledby="seeing-how-css-works" data-item="How CSS Works">
<h2>
<a href="#seeing-how-css-works">Seeing How CSS Works</a>
</h2>
<details class="alert" open>
<summary>
Warning
</summary>
<p>What I show below is <em>not good HTML</em>. You are not supposed to
use <code>&lt;b&gt;</code> tags inside a <code>&lt;ul&gt;</code> list,
and there’s not a real-life case for leaving them empty. But this
makeshift HTML is good enough to show you how the CSS elves work.</p>
</details>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;b&gt;&lt;/b&gt;
&lt;ul&gt;
  &lt;b&gt;&lt;&lt;b&gt;
  &lt;li&gt;For the money&lt;/li&gt;
  &lt;b&gt;&lt;/b&gt;
  &lt;li&gt;For the show&lt;/li&gt;
  &lt;b&gt;&lt;/b&gt;
  &lt;li&gt;To get ready and go cat go&lt;/li&gt;
  &lt;b&gt;&lt;/b&gt;
&lt;/ul&gt;</code></pre>
<p>In my first example, I gave no initial value for the
<code>item</code> counter, so it started with the default value of
<code>0</code>. The CSS elves then found the first list item (“For the
money”), and incremented the <code>item</code> counter by the default
amount: <code>1</code>. So when the first list item was shown, the
<code>content</code> of its <code>::before</code> pseudo-element was
“Item 1.”</p>
<p>In the CSS below, I create a custom <code>counter</code> called
<code>item</code>, with an initial value of <code>10</code>. I also use
<code>counter-increment: item 5;</code> each time an
<code>&lt;li&gt;</code> item is treated, so the first item starts with
an <code>item</code> value of 15.</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">ul {
  list-style-type: none;
  counter-set: item 10;

  li {
    counter-increment: item 5;
  }

  li::before {
    content: "Item " counter(item) ". ";
  }
}

b::before {
  content: "—[" counter(item) "]—";
}</code></pre>
<p>Here’s what this looks like:</p>
<figure>
<img src="images/counters.webp" alt="How CSS increments items" />
<figcaption aria-hidden="true">How CSS increments items</figcaption>
</figure>
<p>Notice the values of <code>counter(item)</code> that are shown in the
<code>&lt;b&gt;</code> elements.</p>
<ul>
<li>The <code>item</code> counter is not available to the first
<code>&lt;b&gt;</code> element (outside the <code>&lt;ul&gt;</code>
element where <code>item</code> is declared, so it shows the default
value of <code>0</code>.</li>
<li>The <code>&lt;b&gt;</code> element that appears in the HTML page
before the first <code>&lt;li&gt;</code> item shows the initial value of
<code>10</code>.</li>
<li>The other <code>&lt;b&gt;</code> elements show the value for
<code>item</code> that was accumulated by all the
<code>&lt;list&gt;</code> items that came before it.</li>
</ul>
</section>
<!-- White Space Matters -->
<section id="white-space-matters" aria-labelledby="white-space-matters" data-item="White Space Matters">
<h2>
<a href="#white-space-matters">White Space Matters</a>
</h2>
<p>Try adding a new line to the ruleset for the <code>b::before</code>
selector:</p>
<pre class="language-css line-numbers" data-start="14"><code class="language-css line-numbers"><i>b::before {
  </i><b>counter-increment: item+1;</b><i>
  content: "—[" counter(item) "]—";
}</i></code></pre>
<p>You’ll see that the CSS elves also now happily add <code>1</code> for
each <code>&lt;b&gt;</code> element they encounter. Notice that there is
no space between <code>item</code> and <code>+1</code>.</p>
<figure>
<img src="images/b-counters.webp"
alt="Making &lt;b&gt; elements also increment item" />
<figcaption aria-hidden="true">Making <code>&lt;b&gt;</code> elements
also increment <code>item</code></figcaption>
</figure>
<p>But what if you change the <code>+</code> to a<code>-</code>
sign?</p>
<pre class="language-css line-numbers" data-start="14"><code class="language-css line-numbers"><i>b::before {
  counter-increment: </i><b>item-1</b><i>;
  content: "—[" counter(item) "]—";
}</i></code></pre>
<p>The CSS elves get confused. They think that you are referring to a
counter named <code>item-1</code>. If you’d used <code>item-one</code>,
it would have had the same effect. You didn’t declare a counter called
<code>item-1</code>, so they ignore it. The result will be just the same
as what you saw in Figure 4.</p>
<p>If you add a white space, then everything is clear again.</p>
<pre class="language-css line-numbers" data-start="14"><code class="language-css line-numbers"><i>b::before {
  counter-increment: item</i><b> -1</b><i>;
  content: "—[" counter(item) "]—";
}</i></code></pre>
<details class="note" open>
<summary>
No <code>counter-decrement</code>
</summary>
<p>Note that there is no <del><code>counter-decrement</code></del>
property. You have to increment by a negative number. And a space.</p>
</details>
<p>Each <code>b</code> element decreases <code>item</code> by 1, in each
and every case, even outside the <code>&lt;ul&gt;</code> where the
<code>item</code> counter is declared. In effect, the CSS elves are very
accommodating. You didn’t declare a <code>counter</code> for this
particular element before you started using it? No worries, they will
create one for you implicitly. Browsers are designed to be forgiving, so
you can write sloppy code.</p>
<p>And yes, my code here is deliberately sloppy. I find that you learn
more about how to write good code if you deliberately try to break the
rules, and see what the effect is. <a
href="https://www.youtube.com/watch?v=vKA4w2O61Xo">If you always do
things perfectly, you don’t find out what the rules are</a>.</p>
<p>And, as before, each <code>&lt;li&gt;</code> item increases
<code>item</code> by 5.</p>
<figure>
<img src="images/counter-1.webp"
alt="Alternately decrementing and incrementing a counter" />
<figcaption aria-hidden="true">Alternately decrementing and incrementing
a counter</figcaption>
</figure>
</section>
<!-- Interacting with the User -->
<section id="interacting-with-the-user" aria-labelledby="interacting-with-the-user" data-item="User Interactions ">
<h2>
<a href="#interacting-with-the-user">Interacting with the User</a>
</h2>
<p>A web experience cannot be considered to be a game if it has no user
interaction. In this section, you’ll be seeing how to use checkboxes,
radio buttons and the sibling combinators ( <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/Subsequent-sibling_combinator"><code>~</code></a>
and <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/Next-sibling_combinator"><code>+</code></a>
) to change what the CSS is counting, depending on what the user clicks
on.</p>
<h3 id="not-on-display">Not on display</h3>
<p>The CSS elves will only count what they can see. You can try to trick
them with another sloppy line of HTML:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;ul&gt;
  &lt;b&gt;&lt;/b&gt;
  &lt;li&gt;For the money&lt;/li&gt;
  &lt;b&gt;&lt;/b&gt;
  &lt;input type="checkbox"&gt; &lt;!-- Linters don't like this in a &lt;ul&gt; --&gt;
  &lt;li&gt;For the show&lt;/li&gt;
  &lt;b&gt;&lt;/b&gt;
  &lt;li&gt;To get ready and go cat go&lt;/li&gt;
  &lt;b&gt;&lt;/b&gt;
&lt;/ul&gt;</code></pre>
<p>And you can add a new rule that will hide the <code>&lt;li&gt;</code>
item immediately after the checkbox when you check it.</p>
<p>(Note that I’ve also removed the
<code>counter-increment: item -1;</code> from the <code>b::before</code>
ruleset, to keep things simple.)</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>ul {
  list-style-type: none;
  counter-set: item 10;

  li {
    counter-increment: item 5;
  }

  li::before {
    content: "Item " counter(item) ". ";
  }

  </i><b>input:checked + li {
    display: none;
  }</b><i>
}

b::before {
  content: "—[" counter(item) "]—";
}</i></code></pre>
<p>What do you think will happen when you click on the checkbox?</p>
<figure>
<img src="images/checked-counter.webp"
alt="CSS doesn’t count elements that are not displayed" />
<figcaption aria-hidden="true">CSS doesn’t count elements that are not
displayed</figcaption>
</figure>
<p>If an element is not displayed, then no counter will count it.</p>
<p>However, if you simply hide a list item, like this…</p>
<pre class="language-css line-numbers" data-start="13"><code class="language-css line-numbers"><i>  input:checked + li {
    visibility: </i><b>hidden</b><i>;
  }</i></code></pre>
<p>… then the CSS elves <em>do</em> count it:</p>
<figure>
<img src="images/hidden-item.webp" alt="CSS does count hidden items" />
<figcaption aria-hidden="true">CSS does count hidden items</figcaption>
</figure>
<p>So here’s a trick that you can use: You can set the
<code>display</code> value of certain HTML elements to <code>none</code>
if particular checkboxes or radio buttons are <code>checked</code>. The
CSS elves will not count the elements with <code>display: none</code>,
so you can display the number of such elements that are visible.</p>
</section>
<!-- Time to Play -->
<section id="time-to-play" aria-labelledby="time-to-play" data-item="Time To Play">
<h2>
<a href="#time-to-play">Time to play: counting clicks</a>
</h2>
<p>If all this makes sense to you, the perhaps you’d like to create a
really simple activity. (If it doesn’t make sense, then you can go back
and read the links that I provided for each new concept, and you try to
make different mistakes to irritate your browser, until you can work out
what rules it really wants you to follow.)</p>
<p>This time, you can leave lists behind, and count checkboxes
directly.</p>
<p>You can create an new HTML file and give it these elements:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">  &lt;label&gt;
    &lt;input type="checkbox"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  &lt;label&gt;
    &lt;input type="checkbox"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  &lt;label&gt;
    &lt;input type="checkbox"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  
  &lt;p&gt;You have clicked on &lt;span&gt;/&lt;/span&gt; circles.&lt;/p&gt;</code></pre>
<p>Attach a CSS stylesheet with the following rules:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body {
  background-color: #222;
  color: #ddd;
  counter-set: total;
}

label span {
  --size: 20vh;
  display: block;
  width: var(--size);
  height: var(--size);
  border-radius: var(--size);
  background-color: gold;
  opacity: 0.25;

  counter-increment: total;
}  

input:checked ~ span {
  opacity: 1;
}

p span::before {
  content: "0"
}

p span::after {
  content: counter(total)
}</code></pre>
<h2 id="make-a-prediction">Make a prediction</h2>
<p>Before you launch your new web page, do your best to predict what you
will see:</p>
<ul>
<li>Each <code>&lt;label&gt;</code> contains both a checkbox and a
<code>&lt;span&gt;</code>. This means that the <code>&lt;span&gt;</code>
is part of the <code>&lt;label&gt;</code>, and a click on this
<code>&lt;span&gt;</code> inside the <code>&lt;label&gt;</code> will
toggle the checkbox.</li>
<li>The <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/Subsequent-sibling_combinator"><code>~</code>
sibling combinator</a> in the selector <code>input:checked ~ span</code>
selects a span only when a preceding <code>&lt;input&gt;</code> sibling
has been checked. When a checkbox is checked, the <code>opacity</code>
of the associated gold circle will be set to <code>1</code>. When the
checkbox is not checked, the gold circle will appear dim.</li>
<li>There are different rulesets for the <code>&lt;span&gt;</code>
elements inside a <code>&lt;label&gt;</code> and for the
<code>&lt;span&gt;</code> inside the <code>&lt;p&gt;</code> element.
This is because they are used for different purposes.</li>
<li>The <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties">custom
CSS property</a> <code>--size</code> allows you to set one value that is
used for the <code>width</code>, <code>height</code> and
<code>border-radius</code> of all the <code>&lt;span&gt;</code> elements
which are inside <code>&lt;label&gt;</code> elements. This means that
the <code>&lt;span&gt;</code>s will be round.</li>
<li>There is a <code>counter</code> called <code>total</code> which
starts with a default value of <code>0</code>. Each
<code>&lt;label&gt;</code> element increments this value by the default
increment of <code>1</code>. There are three <code>&lt;label&gt;</code>
elements, so the final value of <code>total</code> should be 3.</li>
<li>The <code>&lt;span&gt;</code> inside the <code>&lt;p&gt;</code>
element contains only a <code>/</code> slash, but the CSS adds both
<code>::before</code> and <code>::after</code> pseudo-elements to
it.</li>
</ul>
<p>You should see three pale gold circles, each with a checkbox at its
top left, and text at the bottom of your page should say: “You have
clicked on 0/3 circles.” You can click on the checkboxes and circles as
much as you like. After the first click on any of the circles, it will
become brighter, but the final sentence will not change.</p>
<figure>
<img src="images/0-circles.webp"
alt="Two circles clicked… but the text doesn’t update" />
<figcaption aria-hidden="true">Two circles clicked… but the text doesn’t
update</figcaption>
</figure>
<p>The value <code>3</code> appears because of this rule:</p>
<pre class="language-css line-numbers" data-start="27"><code class="language-css line-numbers">p span::after {
  content: counter(total)
}</code></pre>
<details class="challenge" open>
<summary>
Add another counter
</summary>
<p>Can you imagine how to add another <code>counter</code> that will
count how many <code>&lt;input&gt;</code> elements have been checked?
Can you imagine how to display the value of this new
<code>counter</code> in the <code>::before</code> pseudo-element of the
<code>&lt;p&gt;</code> element?</p>
<p>Can you do it on your own, without reading the solution below?</p>
<details class="solution">
<summary>
Solution
</summary>
<p>Here are the lines of CSS that I changed or added in my version, in
order to make this feature work:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>body {
  background-color: #222;
  color: #ddd;
  counter-set: total </i><b>clicked</b><i>;
}</i></code></pre>
<pre class="skip"><code class="skip">&lt;!-- lines skipped --&gt;</code></pre>
<pre class="language-css line-numbers" data-start="23"><code class="language-css line-numbers"><i>p span::before {
  content: </i><b>counter(clicked)</b><i>
}

p span::after {
  content: counter(total)
}
</i><b>
input:checked {
  counter-increment: clicked;
}</b></code></pre>
<figure>
<img src="images/2-circles.webp"
alt="Detecting how many circles were clicked" />
<figcaption aria-hidden="true">Detecting how many circles were
clicked</figcaption>
</figure>
<p>Now when you click on a gold circle, or on its checkbox, the number
shown in the <code>::before</code> pseudo-element changes.</p>
</details>
</details>
<details class="note" open>
<summary>
More than one counter declaration?
</summary>
<p>You might think that declaring each <code>counter</code> on a
different line might be valid CSS…</p>
<pre class="language-css"><code class="language-css">body {
  counter-set: total;
  counter-set: clicked;
}</code></pre>
<p>… and it <em>is</em> valid, but it doesn’t behave the way you might
expect. The second <code>counter-set</code> property overwrites the
first, so <code>counter-set: total;</code> will be ignored.</p>
<p>This is the way CSS works for all other properties. In this
ruleset…</p>
<pre class="language-css"><code class="language-css">label span {
  background-color: gold;
  background-color: silver;
}</code></pre>
<p>… the <code>silver</code> background will overwrite the
<code>gold</code>, just as you would expect.</p>
<p>If you want to declare different <code>counter</code> properties on
different lines, just use a single semicolon at the end of the
multi-line rule:</p>
<pre class="language-css"><code class="language-css">body {
  counter-set:
    total
    clicked;
}</code></pre>
</details>
</section>
<!-- One way Clicking -->
<section id="one-way-clicking" aria-labelledby="one-way-clicking" data-item="One-way Clicking">
<h2>
<a href="#one-way-clicking">One-way Clicking</a>
</h2>
<p>If you click on the same gold circle a second time, the checkbox will
be deselected, and the number of “clicked” circles will go down. What is
the simplest way to ignore any subsequent clicks?</p>
<p>In a group of radio buttons, only one radio button can be checked at
any given time. Clicking on that button again does not uncheck it. If
you have a group with only one radio button in it, then you can switch
it from unchecked to checked, but you can’t toggle it back. Initially, a
group of radio buttons does not need to have any buttons checked. This
means that when you use radio buttons, the initial state can have all
the buttons unchecked, just like you can do with checkboxes.</p>
<p>To test this, change the <code>type</code> of each <code>input</code>
from <code>checkbox</code> to <code>radio</code> and refresh your
page.</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">  <i>&lt;label&gt;
    &lt;input type="</i><b>radio</b><i>"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  &lt;label&gt;
    &lt;input type="</i><b>radio</b><i>"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  &lt;label&gt;
    &lt;input type="</i><b>radio</b><i>"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  
  &lt;p&gt;You have clicked on &lt;span&gt;/&lt;/span&gt; circles.&lt;/p&gt;</i></code></pre>
<p>Now only the first click on a gold circle will have any effect, and
the number of “clicked” circles cannot decrease.</p>
<details class="question" open>
<summary>
Not following orders
</summary>
<p>If you follow my instructions perfectly, your web page should work.
But if it works, what exactly have you learnt? You have definitely
learnt to follow instructions, but you probably knew how to do that
already.</p>
<p>So what if you deliberately do something different, something
disruptive, something that I didn’t ask you to do? For example: what
would happen if you put the “You have clicked on … circles” message at
the <em>beginning</em> of your HTML page?</p>
<p>And just as a double-check, you can add a new line between the second
and the third label, like this:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">  <b>&lt;p&gt;You have clicked on &lt;span&gt;/&lt;/span&gt; circles.&lt;/p&gt;</b>
  <i>&lt;label&gt;
    &lt;input type="radio"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  &lt;label&gt;
    &lt;input type="radio"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  </i><b>&lt;p&gt;&lt;span&gt;/&lt;/span&gt; so far&lt;/p&gt;</b><i>
  &lt;label&gt;
    &lt;input type="radio"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;</i></code></pre>
<p>Suddenly, your first message insists “You have clicked on 0/0
circles”, no matter how hard you click. The new line that you have
inserted fails to count the circle in the layer above it, or any clicks
on that circle.</p>
<figure>
<img src="images/1-circle.webp"
alt="The order of the HTML elements matters" />
<figcaption aria-hidden="true">The order of the HTML elements
matters</figcaption>
</figure>
<p>But were you really being disruptive? Or were you just following
instructions again? I wasn’t watching.</p>
</details>
<details class="note" open>
<summary>
Above or below?
</summary>
<p>Notice how I use the word “above” in the question block above.</p>
<blockquote>
<p>The new line that you have inserted fails to count the circle in the
layer <b><i>above</i></b> it</p>
</blockquote>
<p>The third circle is shown on the screen <em>below</em> the other two,
and lower down in the HTML file. However, it is <em>drawn</em> in a
layer that covers the elements that appear earlier in the HTML file. In
the <em>z-direction</em> —from the screen to your eye— it is
<em>above</em> the <code>&lt;p&gt;</code> element and the other circles,
even if in the y-direction, it is closer to the bottom of your
screen.</p>
<p>You can see what I mean if you add this rule at the end of your
file:</p>
<pre class="language-css line-numbers" data-start="31"><code class="language-css line-numbers">label:last-of-type span {
  position: relative;
  top: -30vh;
  left: 10vh;
  border: 10px solid red
}</code></pre>
<figure>
<img src="images/above.webp"
alt="Elements lower in the HTML page are rendered above those higher in the page" />
<figcaption aria-hidden="true">Elements <em>lower</em> in the HTML page
are rendered <em>above</em> those higher in the page</figcaption>
</figure>
<p>So yes, in one sense, the bottom circle is “above” the others.</p>
</details>
</section>
<!-- HTML and CSS order -->
<section id="html-and-css-order" aria-labelledby="html-and-css-order" data-item="HTML and CSS Order">
<h2>
<a href="#html-and-css-order">Order in HTML and CSS</a>
</h2>
<p>From the test that you did in the last section, you can deduce that
<strong>the order in which elements appear <em>in the HTML file</em>
affects the order in which they can increment a
<code>counter</code></strong>.</p>
<p>But what about the order of rules in the CSS stylesheet? What happens
if you change the order in which the <code>counter</code> properties are
set and read, as shown below?</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><b>/* Read the value of the counter properties... */
p span::before {
  content: counter(clicked)
}

p span::after {
  content: counter(total)
}

/* ...before you declare the counter properties */
</b><i>body {
  background-color: #222;
  color: #ddd;</i><b>
  counter-set:
    total
    clicked;
}</b>

<i>/* The CSS below is unchanged */
label span {
  --size: 20vh;
  display: block;
  width: var(--size);
  height: var(--size);
  border-radius: var(--size);
  background-color: gold;
  opacity: 0.25;

  counter-increment: total;
}  

input:checked ~ span {
  opacity: 1;
}

input:checked {
  counter-increment: clicked;
}</i></code></pre>
<figure>
<img src="images/reorderd.webp"
alt="Reordering the CSS has no effect" />
<figcaption aria-hidden="true">Reordering the CSS has no
effect</figcaption>
</figure>
<h2 id="does-this-solve-the-problem-that-you-just-created">Does this
solve the problem that you just created?</h2>
<p>No. But if you place a copy of the element…</p>
<pre class="language-html"><code class="language-html">&lt;p&gt;You have clicked on &lt;span&gt;/&lt;/span&gt; circles.&lt;/p&gt;`</code></pre>
<p>… back at the end (as I did for the screenshot above), then
everything works fine, at least in this final position. This
<em>suggests</em> that the order in which rules appear <em>in the CSS
file</em> <strong>does not</strong> affect the order in which a
<code>counter</code> is incremented.</p>
<p>But don’t let this give you a false sense of security. As Mr Weasley
said: “Never trust something that can think for itself if you can’t see
where it keeps its brain.”</p>
<details class="tip" open>
<summary>
Checking it twice
</summary>
<p>Whenever I am following a tutorial to learn a new technique, I do the
tutorial twice. The first time, I follow the instructions carefully, so
that I can see that the results are what the writer promised.</p>
<p>Sometimes, tutorials contain errors — a missing step, a missing line,
a missing semicolon — and sometimes the technology has changed since the
tutorial was written, and instructions that used to work no longer do.
When I encounter a tutorial like this, I find that it is often worth
persisting, and searching online for solutions. The process of searching
is where a lot of my learning happens.</p>
<p>The second time I do the tutorial, I try not to read it at all. I do
as much as I can from memory, and inevitably I make mistakes because
there is something that I did not understand, or did not pay attention
to, or assumed that I could ignore. I don’t <em>mean</em> to be
disruptive. I just allow disruption to happen.</p>
<p>It is the mistakes that I make the second time that show me how much
I still have to learn. If I don’t make these mistakes, I can deceive
myself into thinking that I have understood. Solving my mistakes takes
effort (especially if I don’t look back at the tutorial). And something
that you have made an effort to do is something that you will
remember.</p>
<p>An app that works perfectly the first time is less helpful than an
app where I have to struggle to get it to work.</p>
</details>
</section>
<!-- Traffic Lights -->
<section id="traffic-lights" aria-labelledby="traffic-lights" data-item="Traffic Lights">
<h2>
<a href="#traffic-lights">Traffic Lights, anyone?</a>
</h2>
<details class="challenge" open>
<summary>
A challenge for you
</summary>
<p>This arrangement of three circles, one above the other, might make
you think of traffic lights. And you might be tempted now to get
distracted and see if you can create a set of interactive traffic light
with only CSS.</p>
<p>And why not? It’s fun to play, and play is great for learning.</p>
<p>The sequence of traffic lights is not the same in every country.
Here’s a CSS-only illustration of the traffic light sequences in France
and in the UK.</p>
<iframe id="iframe-traffic-lights" title="Traffic Lights" width="150" height="300" src="https://merncraft.github.io/traffic-lights/">
</iframe>
<p>If you want to try this yourself, here’s a hint: You’ll be placing a
checkbox <code>&lt;input&gt;</code> and a <code>&lt;span&gt;</code>
inside a <code>&lt;label&gt;</code> for each light, as you have just
been doing, but the <code>&lt;span&gt;</code> inside (at least) one
label will need a <code>z-index</code> setting, so that a click on this
<code>&lt;span&gt;</code> will check a radio button in a lower
layer.</p>
<p>The GitHub octocat logo in the bottom right corner will take you to
the repository where you can see how this CSS-only activity works.</p>
<p>But <em>this</em> article is about <strong>counting</strong> and you
won’t need to count anything with traffic lights. So when you are ready,
perhaps you would like to continue?</p>
</details>
</section>
<!-- Custom CSS Properties -->
<section id="custom-css-properties" aria-labelledby="custom-css-properties" data-item="Custom Properties">
<h2>
<a href="#custom-css-properties">Custom CSS Properties</a>
</h2>
<p>You can also use <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/--*">custom CSS
properties</a> to hold numbers. To create a custom CSS property, you use
a property name that starts with <code>--x</code>, where “x” is any
letter.</p>
<p>I’ve already used a custom CSS property to set the diameter of the
circles in the last example:</p>
<pre class="language-css"><code class="language-css">label span {
  --size: 20vh;
  display: block;
  width: var(--size);
  height: var(--size);
  border-radius: var(--size);
  /* all other lines skipped */
}</code></pre>
<p>A custom property lets you define a value once, and use it in many
places. It helps you follow the DRY principle: Don’t Repeat Yourself. If
you decided that you wanted circles of a different size, you could
simply change the value of <code>--size</code>, in just one place, and
the <code>width</code>, <code>height</code> and
<code>border-radius</code> properties would all adjust their values.</p>
<details class="note" open>
<summary>
My Opinion on the Term “<del>CSS Variables</del>”
</summary>
<p>Some people use the term <code>CSS variables</code> as a synonym for
custom properties. But I don’t.</p>
<p>In a programming language, a <em>variable</em> can have various
values at different times. And so can custom properties. But:</p>
<ul>
<li>A custom CSS property is often reset to its initial value, as you
will see in a moment</li>
<li>You can’t display the value of a custom CSS property in the
<code>content</code> property of a <code>::before</code> or
<code>::after</code> element</li>
<li>A custom CSS property cannot be used recursively, to reset its value
to a value calculated from itself, as the next demonstration shows.</li>
</ul>
<p>In JavaScript, you can do this, and the JavaScript elves know how to
handle it:</p>
<pre class="language-javascript"><code class="language-javascript">var x = 1
x = x * 2</code></pre>
<p>After these two lines of code have been executed, <code>x</code> will
have the value <code>2</code>.</p>
<p>In CSS, you can set a custom property to a different value. This
works fine:</p>
<pre class="language-css"><code class="language-css">label span {
  --size: 25vh;
  --size: 15vh;
  display: block;
  width: var(--size);
  height: var(--size);
  border-radius: var(--size);
  /* more lines skipped */
}</code></pre>
<p>But in the snippet below, the second rule causes the CSS elves to
panic, as if they see themselves in an <a
href="https://en.wikipedia.org/wiki/Infinity_mirror">infinity
mirror</a>. They simply stop working for you.</p>
<pre class="language-css"><code class="language-css"><i>label span {
  --size: 25vh;
  --size: </i><b>calc(0.6 * var(--size))</b><i>;
  display: block;
  width: var(--size);
  height: var(--size);
  border-radius: var(--size);
  /* more lines skipped */
}</i></code></pre>
<p>Try both of these changes in the clicking-on-circles exercise that
you have just done.</p>
<p>Custom CSS properties do not behave like variables do in other
languages. So <em>I</em> always say “custom CSS
<strong><em>properties</em></strong>”, to make this distinction clear.
But if you call them “CSS variables”, if you want to. I won’t say
anything. I’ll just sigh.</p>
<p>Here is the official explanation of this, without any reference to
CSS elves: <a
href="https://www.w3.org/TR/css-variables-1/#cycles">Resolving
Dependency Cycles</a></p>
</details>
</section>
<!-- Set Starting Value -->
<section id="set-starting-value" aria-labelledby="set-starting-value" data-item="Set Starting Value">
<h2>
<a href="#set-starting-value">Setting a starting value for a counter
with a custom property</a>
</h2>
<p>To explore how custom CSS properties can interact with counters,
create a new HTML file with the following body:</p>
<pre class="language-html"><code class="language-html">  &lt;b&gt;&lt;/b&gt;
  &lt;p&gt;Tinker&lt;/p&gt;
  &lt;p&gt;Tailor&lt;/p&gt;
  &lt;p&gt;Soldier&lt;/p&gt;
  &lt;p&gt;Sailor&lt;/p&gt;
  &lt;hr&gt;
  &lt;label&gt;
    Add 10: &lt;input id="add10" type="checkbox"&gt;
  &lt;/label&gt;
  &lt;label&gt;
    Add 100: &lt;input id="add100" type="checkbox"&gt;
  &lt;/label&gt;
  &lt;label&gt;
    Add 1000: &lt;input id="add1000" type="checkbox"&gt;
  &lt;/label&gt;</code></pre>
<details class="challenge" open>
<summary>
Write your own CSS
</summary>
<p>Here’s a challenge: Before you read on, can you use everything you
have learnt so far about CSS counters to write the CSS that will make
your page look like this?</p>
<figure>
<img src="images/property-layout.webp"
alt="What your page should look like" />
<figcaption aria-hidden="true">What your page should look
like</figcaption>
</figure>
<details class="solution">
<summary>
Solution
</summary>
<p>Are you ready now? Or are you being disruptive, like I suggested you
should be?</p>
<p>Did you write something like this?</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body {
  counter-reset: item 
}

b::before {
  content: "—[" counter(item) "]—";
}

p {
  counter-increment: item;
}

p::before {
  content: counter(item) ": ";
}

label {
  display: block;
}</code></pre>
<p>I imagine that:</p>
<ul>
<li>You chose a different name for your counter</li>
<li>You might have given it an initial value and an explicit increment
value</li>
<li>Your rules might be in a different order.</li>
</ul>
<p>That’s good. It means that you won’t be able to simply copy and paste
the CSS that I provide below. You’ll have to adapt it to work with your
property names. You’ll have to make an effort. 😈</p>
</details>
</details>
<h3 id="activating-the-inputs">Activating the inputs</h3>
<p>To activate the checkboxes, can you do these three steps?</p>
<ol type="1">
<li>Add a custom CSS property to the ruleset for the <code>body</code>
selector, and set its value to <code>0</code>. Below, I’ve used the name
<code>--start</code>, but you can use whatever name you like.</li>
<li>Use your custom CSS property as the initial value for your
counter.</li>
</ol>
<pre class="language-css"><code class="language-css">/* Create a CSS property and use it to initialize the counter */
body {
  --start: 0;
  counter-reset: item var(--start);
}</code></pre>
<ol start="3" type="1">
<li>Add three new rules that will change the value of your custom CSS
property. <strong>Note that I have placed the rule for the
<code>#add1000</code> input first. Please do the same, even if you are
feeling disruptive. You’ll see why in a moment.</strong></li>
</ol>
<pre class="language-css"><code class="language-css">/* Use the checkboxes to change the value of --start */
body:has(#add1000:checked)  {
  --start: 1000
}

body:has(#add10:checked)  {
  --start: 10
}

body:has(#add100:checked)  {
  --start: 100
}</code></pre>
<p>Notice that I have wrapped the reference to the
<code>&lt;input&gt;</code> elements with the new <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has"><code>:has(...)</code>
pseudo-class</a>. Basically, this says: “if the <code>body</code> has a
checked input, then set the value of <code>--start</code> for the
<code>body</code> and all its children”.</p>
<details class="question" open>
<summary>
Why use <code>:has()?</code>
</summary>
<p>What would happen if you don’t use the <code>:has()</code>
pseudo-class, like this?</p>
<pre class="language-css"><code class="language-css">#add100:checked  {
  --start: 100
}</code></pre>
<p>The rule above would say: “Set the value of <code>--start</code> for
<code>input#add100</code> and all its children.” But
<code>&lt;input&gt;</code> elements don’t have any children, so the
value of <code>--start</code> would change only for the
<code>&lt;input&gt;</code> itself, and the <code>&lt;input&gt;</code>
itself ignores it. So nothing would happen.</p>
</details>
<h2 id="testing-what-the-checkboxes-do">Testing what the checkboxes
do</h2>
<p>Refresh your page, and then click on each of the checkboxes in turn.
You should see the numbers change. Do they change the way you would
expect them to?</p>
<iframe id="iframe-custom-properties" title="Custom Properties" width="150" height="300" src="https://merncraft.github.io/CSS_properties/">
</iframe>
<p>When you check Add 10, you should see <code>——[10]——</code>. If you
check both Add 10 and Add 100, you should see <code>——[100]——</code>,
not <code>110</code> And if you check Add 1000 <em>on its own</em>, you
should see <code>——[1000]——</code>.</p>
<p>But if you check Add 1000 <em>and one of the other checkboxes</em>,
you do <strong>not</strong> see <code>——[1000]——</code>. You see
<code>——[100]——</code> or <code>——[10]——</code> instead.</p>
<figure>
<img src="images/add-to-start.webp"
alt="Setting –start with a checkbox" />
<figcaption aria-hidden="true">Setting –start with a
checkbox</figcaption>
</figure>
<p>If you see something different, then check that your rule for
<code>#add1000</code> does indeed appear first in your CSS file, as it
does in my code listing above.</p>
<h2 id="order-does-matter-in-css">Order <em>does</em> matter in CSS</h2>
<p>I deliberately placed the rule for <code>#add1000</code> first, so
that you can see that the order in which the CSS rules are written
<strong>does</strong> matter when you set the value of custom CSS
property. Even if you change the order of the <code>&lt;input&gt;</code>
elements in the HTML file, as shown below, <strong>the order of the CSS
rules still takes priority</strong>.</p>
<pre class="language-html"><code class="language-html">  &lt;label&gt;
    Add 1000: &lt;input id="add1000" type="checkbox"&gt;
  &lt;/label&gt;
  &lt;label&gt;
    Add 100: &lt;input id="add100" type="checkbox"&gt;
  &lt;/label&gt;
  &lt;label&gt;
    Add 10: &lt;input id="add10" type="checkbox"&gt;
  &lt;/label&gt;</code></pre>
<p>Try it and see.</p>
</section>
<!-- Resetting a Counter -->
<section id="resetting-a-counter" aria-labelledby="resetting-a-counter" data-item="Resetting A Counter">
<h2>
<a href="#resetting-a-counter">Resetting A Counter</a>
</h2>
<p>As you have just seen, you can set a <code>counter</code> to a value
given by a custom CSS property. If you change the value of the custom
CSS property, the values of all the counters will be recalculated.</p>
<p>But you can also use <code>counter-set</code> explicitly anywhere in
your CSS. Will there be a conflict of interests? Who will win? The
custom CSS property or the value given by <code>counter-set</code>?</p>
<p>Here’s how you could test this.</p>
<ol type="1">
<li>Add a new line to your HTML:</li>
</ol>
<pre class="language-html line-numbers"><code class="language-html line-numbers">  &lt;p&gt;Tinker&lt;/p&gt;
  &lt;p&gt;Tailor&lt;/p&gt;
  &lt;b class="resetter"&gt;</b> &lt;!-- new line --&gt;
  &lt;p&gt;Soldier&lt;/p&gt;
  &lt;p&gt;Sailor&lt;/p&gt;</code></pre>
<ol start="2" type="1">
<li>Replace your current rule for <code>body</code> with these two
rules… which may or may not be in a logical order. (That’s what we want
to find out.)</li>
</ol>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><b>b.resetter {
  counter-reset: item 9999;
}</b>

<i>body {
  counter-reset: item var(--start);
  --start: 0;
}</i></code></pre>
<pre class="skip"><code class="skip">/* The following lines do not change */</code></pre>
<ol start="3" type="1">
<li>Refresh your page. You should see something like this.</li>
</ol>
<iframe id="iframe-reset-counter" title="Reset Counter" width="150" height="300" src="https://merncraft.github.io/reset_counter/">
</iframe>
<ol start="4" type="1">
<li>Notice that the item number for <code>Soldier</code> is
<code>10000</code> (<code>9999 + 1</code>), and that this value does not
change when you check any of the checkboxes, although the numbers for
the paragraphs before the <code>b.resetter</code> element do
change.</li>
</ol>
<figure>
<img src="images/counter-set.webp"
alt="counter-reset takes priority over custom properties" />
<figcaption aria-hidden="true">counter-reset takes priority over custom
properties</figcaption>
</figure>
<p>In the screenshot above, the custom CSS property <code>--start</code>
is set to <code>100</code>, and this determines what value the
<code>item</code> counter has, until the
<code>&lt;b class=resetter&gt;</code> element is displayed. At this
point, the rule…</p>
<pre class="language-css"><code class="language-css">b.resetter {
  counter-set: item 9999;
}</code></pre>
<p>… is applied, and the initial value set by the custom CSS property
<code>--start</code> is forgotten. Once again, it is the order of
elements <em>in the HTML source</em> that decides what value a
<code>counter</code> will have at any particular point.</p>
<p>To summarize:</p>
<ul>
<li>When you use CSS to alter the value of a custom CSS property, it is
the precedence in the CSS which determines the value</li>
<li>When you use CSS to alter the value of a CSS counter, it is the
order of elements in the HTML file which determines the value.</li>
</ul>
<p>This is, in fact, logical, but it can be confusing.</p>
</section>
<!-- Counting without Numbers -->
<section id="counting-without-numbers" aria-labelledby="counting-without-numbers" data-item="No-number Counters">
<h2>
<a href="#counting-without-numbers">Counting Without Numbers</a>
</h2>
<p>So far, every time you’ve seen a counter, it’s looked like a number.
Well… that’s not quite true. Right at the beginning, in the little
sneak-peek demos, you saw counters that look like letters and emojis.
You may not even have realized they were counter tokens, although I did
give a big hint.</p>
<p>Here’s a CSS-only presentation of how the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/@counter-style"><code>@counter-style</code>
at-rule</a> can be used to change the tokens that are used to number
items in an <code>&lt;ol&gt;</code> list. Click on the style names on
the right to see how it changes the counter tokens on the left.</p>
<p>The <code>&lt;ol&gt;</code> list on the left contains only empty
<code>&lt;li&gt;</code> items, so all you see are the
<code>::marker</code> tokens.</p>
<iframe id="iframe-counter-styles" title="Counter Styles" width="300" height="230" src="https://MERNCraft.github.io/counter-styles">
</iframe>
<p>The default value for <code>list-style-type</code> is decimal. Your
browser has <a
href="https://w3c.github.io/predefined-counter-styles/">over 100
built-in alternatives</a>, to cater to writing systems all around the
world. You can see them in action <a
href="https://mdn.github.io/css-examples/counter-style-demo/">here</a>.
In order to create so many styles, the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/@counter-style"><code>@counter-style</code></a>
at-rule became <a
href="https://caniuse.com/?search=%40counter-style">available in all
major browsers since September 2023</a>.</p>
<p>Here, for example, is the built-in <code>@counter-style</code>
at-rule for Thai numeric symbols. This gives the Unicode code points for
each numeral:</p>
<pre class="language-css"><code class="language-css">@counter-style thai { 
  system: numeric;
  symbols: '\E50' '\E51' '\E52' '\E53' '\E54' '\E55' '\E56' '\E57' '\E58' '\E59';
}</code></pre>
<p>The <code>@counter-style</code> below has exactly the same effect. It
uses the actual <a
href="https://compart.com/en/unicode/search?q=thai#characters">Thai
characters</a> instead of their code points.</p>
<pre class="language-css"><code class="language-css">@counter-style thai { 
  system: numeric;
  symbols: '๐' '๑' '๒' '๓' '๔' '๕' '๖' '๗' '๘' '๙';
}</code></pre>
<p>And just like the <code>counter</code> property has been made generic
so that all HTML elements have access to it, so the
<code>@counter-style</code> has been made generic, so that you can
create your own styles. Here’s my rule for English weekday
abbreviations:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">@counter-style weekdays {
  system: cyclic;
  symbols: "Mon" "Tue" "Wed" "Thu" "Fri" "Sat" "Sun";
  suffix: "";
}</code></pre>
<p>By default, each <code>counter-style</code> has <code>"."</code> as
its suffix. If you want to remove this (as I did for the weekdays), or
change it to something else (like <code>")"</code>), you can use the
<code>suffix</code> property.</p>
<p>Because you can use <em>any text</em>, you can also use emojis. Or <a
href="https://www.compart.com/en/unicode/category/Sm">mathematical
symbols</a>. Or Unicode <a
href="https://www.compart.com/en/unicode/block/U+25A0">shapes</a> and <a
href="https://www.compart.com/en/unicode/block/U+2190">arrows</a>. The
W3C specifications also describe the use of images, but at the time of
writing, the major browsers have not implemented this for counters yet.
(You can set the <code>list-style-image</code> as bullet points for a
whole list or for an individual list item, though, but this is outside
the current topic of counters.)</p>
</section>
<!-- Marker Styling -->
<section id="marker-styling" aria-labelledby="marker-styling" data-item="::marker Styling">
<h2>
<a href="#marker-styling"><code>::marker Styling</code></a>
</h2>
<p>In the example in the previous section, all the Thai list-items
appear in red, and the weekday abbreviations “Sat” and “Sun” appear in
gold. This is not an effect of the <code>@counter-style</code> that is
used. This is achieved by <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/::marker">styling
the <code>::marker</code> pseudo-element</a>.</p>
<p>You can only change a few properties of the <code>::marker</code>
pseudo-element. You can’t change its alignment or position, for
instance, but you can change the <code>color</code> and even the
<code>content</code>. Here’s the CSS that I’ve used to make weekends
stand out, and react to being rolled over by the mouse:</p>
<pre class="language-css"><code class="language-css">#weekdays:checked {
  & ~ ol {
    list-style-type: weekdays;

    li:nth-child(7n + 6)::marker,
    li:nth-child(7n)::marker {
      color: gold;
    }

    li:nth-child(7n + 6):hover::marker,
    li:nth-child(7n):hover::marker {
      content: "Weekend!";
    }
  }
}</code></pre>
<p>Note that the <code>:hover</code> pseudo-class applies to the list
item itself; it cannot be applied to the <code>::marker</code>
pseudo-element.</p>
<figure>
<img src="images/hover-sat.webp" alt="Hovering over Saturday" />
<figcaption aria-hidden="true">Hovering over Saturday</figcaption>
</figure>
<p>The <code>::marker</code> pseudo-element only applies to list
elements (<code>&lt;ul&gt;</code>, <code>&lt;ul&gt;</code> and
<code>&lt;dl&gt;</code>). You can provide CSS rulesets for the
<code>::before</code> and <code>::after</code> pseudo-elements of any
visible element, and these can be styled in many more ways than the
<code>::marker</code> pseudo-element.</p>
</section>
<!-- No click Actions -->
<section id="no-click-actions" aria-labelledby="no-click-actions" data-item="No-click Actions">
<h2>
<a href="#no-click-actions">No-click Actions</a>
</h2>
<p>So far, you’ve seen how to count checkboxes, radio buttons and other
elements which are displayed on the page. This requires the user to
interact physically with your game, and interaction is what gives your
players the feeling that they are in control. (But you know that
<em>you</em>, the game developer, you are <em>really</em> the one who is
in control of their experience.)</p>
<p>Often, though, you want certain actions of your game to happen
automatically: a countdown timer, for example, or a spinning reel on a
fruit machine, or the expression on an emoji face. Or you may want to
trigger something without the player performing an action as deliberate
as a conscious click.</p>
<p>In the rest of this article, I’ll describe two other solutions: CSS
animations and the <code>:hover</code> pseudo-class.</p>
</section>
<!-- Animations -->
<section id="animations" aria-labelledby="animations" data-item="Animations">
<h2>
<a href="#animations">Animations</a>
</h2>
<p>The easiest project for exploring how CSS animations work with CSS
counters is a countdown timer. Here’s the kind of thing you’ll be
creating in this exercise (with some extra contral buttons):</p>
<iframe id="iframe-countdown" title="Countdown" width="300" height="300" src="https://merncraft.github.io/10s-timer">
</iframe>
<p>For this new topic, you can create a new folder with the name
“Countdown” and create inside it an HTML file and a linked CSS file.
Here’s enough HTML to get started:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;div&gt;&lt;/div&gt;</code></pre>
<p>Here is some equally minimal CSS:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body {
  counter-set: countdown 10;
}

div::after {
  content: counter(countdown);
  font-size: 256px;
}</code></pre>
<details class="note" open>
<summary>
Connecting HTML and CSS
</summary>
<p>I’m assuming that you know how to create an HTML page with a linked
CSS file, so that you can get this to work for you. If not, click on the
GitHub octocat logo in the demo above, and check out how it works.</p>
</details>
<p>The <code>font-size</code> is not strictly necessary, but it makes
the display more dramatic. Your page should now show a big number
<code>10</code>.</p>
<h2 id="the-keyframes-at-rule">The <code>@keyframes</code> at-rule</h2>
<p>CSS Animations are defined by a <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/@keyframes"><code>@keyframes</code></a>
at-rule. Here is a rule that creates an animation with the name
<code>timer</code>:</p>
<pre class="language-css line-numbers" data-start="10"><code class="language-css line-numbers">@keyframes timer {
   0% { counter-increment: countdown   0; }
  10% { counter-increment: countdown  -1; }
  20% { counter-increment: countdown  -2; }
  30% { counter-increment: countdown  -3; }
  40% { counter-increment: countdown  -4; }
  50% { counter-increment: countdown  -5; }
  60% { counter-increment: countdown  -6; }
  70% { counter-increment: countdown  -7; }
  80% { counter-increment: countdown  -8; }
  90% { counter-increment: countdown  -9; }
 100% { counter-increment: countdown -10; }
}</code></pre>
<p>You can add this at the end of your CSS file.</p>
<details class="tip" open>
<summary>
Hacking with Emmet
</summary>
<p>Note that I did not type all of this out by hand. I used a hack. My
code editor is VS Code, and this comes with a built-in plug-in called
Emmet. (<a href="https://www.etymonline.com/search?q=emmet">Emmet</a> is
an old or dialectical word for <a
href="https://www.etymonline.com/word/ant">ant</a>.) Emmet provides
shortcuts for HTML and CSS code that you might need to type regularly.
As of the time of writing, it does not provide shortcuts for generating
CSS keyframe animations. So I cheated. I used a shortcut for creating a
series of HTML elements with incrementing values. I typed this in my
HTML page…</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">div{ $% counter-increment: countdown -$ }*10</code></pre>
<p>… and then pressed Enter. (Tab also works.) This produced the
following output:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;div&gt; 1% counter-increment: countdown -1 &lt;/div&gt;
&lt;div&gt; 2% counter-increment: countdown -2 &lt;/div&gt;
&lt;div&gt; 3% counter-increment: countdown -3 &lt;/div&gt;
&lt;div&gt; 4% counter-increment: countdown -4 &lt;/div&gt;
&lt;div&gt; 5% counter-increment: countdown -5 &lt;/div&gt;
&lt;div&gt; 6% counter-increment: countdown -6 &lt;/div&gt;
&lt;div&gt; 7% counter-increment: countdown -7 &lt;/div&gt;
&lt;div&gt; 8% counter-increment: countdown -8 &lt;/div&gt;
&lt;div&gt; 9% counter-increment: countdown -9 &lt;/div&gt;
&lt;div&gt; 10% counter-increment: countdown -10 &lt;/div&gt;</code></pre>
<p>The <a href="https://docs.emmet.io/abbreviations/syntax/#text">curly
<code>{}</code> brackets</a> define the text that I want to appear
inside the HTML element, <a
href="https://docs.emmet.io/abbreviations/syntax/#item-numbering">the
dollar <code>$</code> sign</a> is replaced by a line number and the <a
href="https://docs.emmet.io/abbreviations/syntax/#multiplication">multiplication
<code>*</code> sign</a> tells Emmet how many elements I want.</p>
<p>The output is not exactly what I want, but I then used VS Code’s
built-in <a
href="https://code.visualstudio.com/docs/getstarted/tips-and-tricks#_multi-cursor-selection">multi-cursor
selection</a> to quickly remove the parts that I did not want, to add
curly <code>{}</code> brackets where I did want them, and to add a
<code>0</code> between the numbers on the left and the following
percentage <code>%</code> sign.</p>
</details>
<details class="note" open>
<summary>
Absolutely not a loop
</summary>
<p>Notice that each keyframe deducts a bigger number from
<code>countdown</code> than the previous keyframe. This reveals a
critical difference between the way CSS applies a variety of rules to a
static page, compared with the way JavaScript can apply loops and
variables to create an endless range of possibilities.</p>
<p>In JavaScript, you could reduce the value of a variable by
<code>1</code> on each iteration through a loop. In CSS, each time a new
keyframe uses <code>counter-increment</code> to change the value of the
<code>countdown</code> counter, it does this with reference to the
initial value of <code>10</code> that is set by this rule for the
<code>&lt;body&gt;</code> element:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body {
  counter-set: countdown 10;
}</code></pre>
<p>Or to put it another way, CSS starts from the original static HTML
page each time, and applies its rules in the appropriate order. There is
never any question of looping.</p>
</details>
<h2 id="the-independence-of-keyframes">The independence of
<code>@keyframes</code></h2>
<p>An <code>@keyframes</code> rule simply gives instructions on what
should change at what point in the animation. It does not give any
information on which element this animation should be applied to, or how
fast it should run or whether it should repeat, or a number of other
things.</p>
<h2 id="playing-an-animation">Playing an animation</h2>
<p>To get the countdown timer to work, you can add a single line to your
CSS. This provides details that are not included in the
<code>@keyframes</code> at-rule itself:</p>
<pre class="language-css line-numbers" data-start="5"><code class="language-css line-numbers"><i>div::after {
  content: counter(countdown);
  font-size: 256px;
  </i><b>animation: timer 10s forwards;</b><i>
}</i></code></pre>
<p>This new line says:</p>
<ul>
<li>Apply the animation named <code>timer</code> to the element
identified by <code>div::after</code></li>
<li>Play the animation over the span of <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-duration"><code>10s</code></a></li>
<li>When the animation reaches the end, don’t rewind. Just play it <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-fill-mode"><code>forwards</code></a>.</li>
</ul>
<p>The animation should start as soon as you load the page, and continue
until the counter shows a big <code>0</code>. The word
<code>forwards</code> is one of the values of the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-fill-mode"><code>animation-fill-mode</code></a>
property. It tells the CSS elves to leave everything the way they were
told to by the last keyframe they read.</p>
<h2 id="transition-between-frames">Transition between frames</h2>
<p>Reload the page to restart your animation.</p>
<details class="env" open>
<summary>
Hard refresh in Firefox
</summary>
<p>In Firefox, when you simply refresh a page, Firefox remembers the
state of all your checkboxes, radio buttons, details elements and so on,
and restores their state after refreshing the page. To clear all these
states, you need to use a <em>hard refresh</em>, which also clears the
cache.</p>
<p>The keyboard shortcut for this, for all common browsers, is
<code>Ctrl-Shift-R</code> (or <code>Command-Shift-R</code> if you’re
working on a Mac.)</p>
</details>
<p>Do you notice that the step from <code>10</code> to <code>9</code>
plays faster than the following steps? This is because, by default, CSS
applies a <em>transition</em> between each keyframe. If the property
that the animation changes can have intermediate values, then the
animation will move it smoothly from one keyframe to the next.</p>
<p>However, the value of your <code>counter</code> changes by a whole
integer at each step. There are no intermediate values. With the default
settings, the CSS elves get half-way towards the next keyframe and they
think: “We’re closer to next waypoint now. Let’s change already!” As a
result, with your counter, the changes happen after 0.5s, 1.5s, 2.5s,
and so on. That’s why the change from <code>10</code> to <code>9</code>
happens faster than you would expect.</p>
<p>You will see how to fix this in the coming sections.</p>
<details class="note" open>
<summary>
What’s key about a keyframe?
</summary>
<p>The word <em>keyframe</em> is used to refer the precise values to use
at precise times. The browser will interpolate other (non-key) frames
between each keyframe.</p>
</details>
</section>
<!-- Transitions -->
<section id="transitions" aria-labelledby="transitions" data-item="Transitions">
<h2>
<a href="#transitions">Transitions</a>
</h2>
<p>You can observe this interpolation process by adding a second
<code>@keyframes timer</code> at-rule after the first:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">@keyframes timer {
  0% { background-color: #f00; }
 10% { background-color: #f80; }
 20% { background-color: #ff0; }
 30% { background-color: #0f0; }
 40% { background-color: #0cf; }
 50% { background-color: #06f; }
 60% { background-color: #33f; }
 70% { background-color: #00f; }
 80% { background-color: #80f; }
 90% { background-color: #f0f; }
100% { background-color: #f00; }
}</code></pre>
<details class="note" open>
<summary>
Only the last timer animation is applied
</summary>
<p>Because this second at-rule appears later in the CSS file than the
other, the CSS elves will ignore the first
<code>@keyframes timer</code>. They won’t increment the countdown
counter any more, they will only change the
<code>background-color</code>.</p>
</details>
<p>Now when you refresh your page, you should see the
<code>background-color</code> moving smoothly from one colour to the
next. The effect should be similar to what you see in the animation
below. (My animation has more bells and whistles than yours will have,
to illustrate the various points I’ll be mentioning).</p>
<iframe id="iframe-colour-countdown" title="Colour Countdown" width="300" height="300" src="https://merncraft.github.io/colour-countdown">
</iframe>
<h2
id="animation-timing-function"><code>animation-timing-function</code></h2>
<p>Actually, the default <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function"><code>animation-timing-function</code></a>
is <code>ease-in-out</code>, so there it slows down as it reaches each
intermediate <code>background-color</code> then speeds up again If you
replace your <code>animation</code> rule with this…</p>
<pre class="language-css line-numbers" data-start="8"><code class="language-css line-numbers">  <i>animation: timer 10s forwards </i><b>linear</b><i>;</i></code></pre>
<p>… then the changes become even smoother.</p>
</section>
<!-- Stepwise Animations -->
<section id="stepwise-animations" aria-labelledby="stepwise-animations" data-item="Stepwise Animations">
<h2>
<a href="#stepwise-animations">Stepwise Animations</a>
</h2>
<p>As I mentioned earlier, with the default <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function"><code>animation-timing-function</code></a>
of <code>ease-in-out</code> (and even with the value
<code>linear</code>), the changes in your countdown timer happen after
0.5s, 1.5s, 2.5s, and so on. For a countdown timer, this is not what you
want. Here’s how to fix that.</p>
<p>Keep the <code>@keyframes timer</code> rule that changes the
<code>background-color</code>, but change your <code>animation</code>
rule to this:</p>
<pre class="language-css line-numbers" data-start="8"><code class="language-css line-numbers">  animation: timer 10s forwards step-end;</code></pre>
<p>With the <code>step-end</code> timing function, you should see an
abrupt change to the next <code>background-color</code>at the end of
every second. Comment out the <code>background-color</code> timer, so
that the original <code>counter-increment</code> plays instead. You
should see that change from <code>10</code> to <code>9</code> now
happens the way you would expect.</p>
<details class="question" open>
<summary>
Using other<code>animation-timing-function</code> values
</summary>
<p>What happens if you use <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function#jump-end"><code>jump-end</code></a>,
or <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function#end"><code>end</code></a>,
or <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function#step-start">step-start</a>
as the timing function instead? Some of these have the same effect, one
does something different.</p>
<p>Whenever you meet a new idea, it is good to try a number of variants.
This helps you to remember. The human brain is very sensitive to
changes. Your eyes are constantly twitching, so that the signal they
send to the brain is always slightly different. <a
href="https://www.rochester.edu/newscenter/small-eye-movements-are-critical-for-20-20-vision-415522/">If
the image on your retina does not change, your vision becomes
poorer</a>. When the pump on your refrigerator is running, your brain
stops hearing it. When the pump motor stops, you suddenly become aware
of the lack of noise.</p>
<p>If you give your brain the chance to compare and contrast ideas, your
brain will pay more attention.</p>
</details>
<p>Here’s another demonstration of the timing of changes of a different
discrete animatable CSS property: <code>z-index</code>:</p>
<iframe id="iframe-timing" title="Timing" width="300" height="150" src="https://merncraft.github.io/timing">
</iframe>
<p>This demonstration uses the following <code>@keyframes</code>
animation:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">@keyframes z-left {
  0%  { z-index: 0; left:  0px; }
  10% { z-index: 1; left:  0px; }
  30% { z-index: 2; left:  50px; }
  50% { z-index: 3; left: 100px; }
  70% { z-index: 4; left: 150px; }
  90% { z-index: 5; left: 200px; }
 100% { z-index: 5; left: 200px; }
}</code></pre>
<p>When you select <code>step-end</code> as the
<code>animation-timing-function</code> for this animation, the integer
steps for <code>z-index</code> coincide with the stepwise change of the
<code>left</code> property for the grey square. When you select
<code>linear</code> as the <code>animation-timing-function</code>, the
value of <code>left</code> changes at a steady pace between keyframes.
The change in <code>z-index</code> occurs when the grey square is
halfway between two keyframe positions.</p>
<p>You can find a list of all animatable CSS properties <a
href="https://www.quackit.com/css/css3/animations/animatable_properties/">here</a>.
Most properties have an animation associated with them, and code that
you can copy and paste.</p>
</section>
<!-- Starting an Animation -->
<section id="starting-an-animation" aria-labelledby="starting-an-animation" data-item="Starting an Animation">
<h2>
<a href="#starting-an-animation">Starting an Animation</a>
</h2>
<p>For now, to restart your animation, you have to reload the page.
Reloading the page will reset everything in your game, so you only want
to do this if the player wants to start over from the beginning.</p>
<p>Here’s a change you can make so that the animation will restart when
you move your mouse over the <code>&lt;div&gt;</code> element. I’ve
given the complete CSS code, so you can compare with what you have in
your project, but only a small part has changed.</p>
<p>Note that I have reduced the duration of the animation to just
<code>1s</code>, because your time is precious, and you don’t want to
wait ten whole seconds to see the final result.</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>body {
  counter-set: countdown 10;
}

div::after {
  content: counter(countdown);
  </i>font-size: 256px;<b>
}

/* animation rule moved to here... and made to run faster */
div:hover::after {
  animation: timer 1s forwards step-end;</b><i>
}

@keyframes timer {
  0% { counter-increment: countdown   0; }
 10% { counter-increment: countdown  -1; }
 20% { counter-increment: countdown  -2; }
 30% { counter-increment: countdown  -3; }
 40% { counter-increment: countdown  -4; }
 50% { counter-increment: countdown  -5; }
 60% { counter-increment: countdown  -6; }
 70% { counter-increment: countdown  -7; }
 80% { counter-increment: countdown  -8; }
 90% { counter-increment: countdown  -9; }
100% { counter-increment: countdown -10; }
}

/* @keyframes timer {
   0% {  background-color: #f00; }
  10% {  background-color: #f80; }
  20% {  background-color: #8f0; }
  30% {  background-color: #0f0; }
  40% {  background-color: #0f8; }
  50% {  background-color: #08f; }
  60% {  background-color: #00f; }
  70% {  background-color: #80f; }
  80% {  background-color: #f0f; }
  90% {  background-color: #f08; }
 100% {  background-color: #f00; }
} */</i></code></pre>
<p>Now, if you move your mouse over the text the
<code>&lt;div&gt;</code>, the animation will start. It will stop again
and revert to showing <code>10</code> as soon as you move the mouse down
off the <code>&lt;div&gt;</code>.</p>
<h2 id="restarting-when-the-state-changes">Restarting when the state
changes</h2>
<p>If you hold the mouse in a place where the animation will run to the
end, you should see a big <code>0</code>. If you then move the mouse
away from the link, it will revert to showing <code>10</code>.</p>
<p>Before, it played all the way to the end, and then stayed at
<code>0</code>, regardless of where the mouse was. What has changed?</p>
<p>Before, the animation started as soon as the page was loaded. The
page remained loaded after the animation finished, so the CSS elves left
everything the way they were told to by the final <code>100%</code>
keyframe of the animation. Now, when you move the mouse off the link,
they consider the animation to be switched off again, and reset
everything to its original state.</p>
</section>
<!-- Pausing an Animation -->
<section id="pausing-an-animation" aria-labelledby="pausing-an-animation" data-item="Pausing an Animation">
<h2>
<a href="#pausing-an-animation">Pausing an Animation</a>
</h2>
<p>Instead of <code>:hover</code>, you can use the state of a checkbox
or a radio button to change the state of an animation. Edit your HTML
page so that it looks like this:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;label&gt;
  &lt;input type="radio" name="play-state" id="play"&gt;
  &lt;span&gt;Play&lt;/span&gt;
&lt;/label&gt;
&lt;label&gt;
  &lt;input type="radio" name="play-state" id="pause"&gt;
  &lt;span&gt;Pause&lt;/span&gt;
&lt;/label&gt;
&lt;label&gt;
  &lt;input type="radio" name="play-state" id="stop"&gt;
  &lt;span&gt;Reset&lt;/span&gt;
&lt;/label&gt;

&lt;div&gt;&lt;/div&gt;</code></pre>
<p>Notice that there are three radio buttons which all appear before the
<code>&lt;div&gt;</code>. These radio buttons share the same
<code>name</code> property, so only one can be on at a time, but they
all have different <code>id</code> values.</p>
<p>In your CSS page, comment out the rule for
<code>div:hover::after</code> and add a new rule for the radio
buttons:</p>
<pre class="language-css line-numbers" data-start="11"><code class="language-css line-numbers">/* div:hover::after {
  animation: timer 1s forwards step-end;
} */

input:checked {
  animation: timer 1s forwards step-end;
}</code></pre>
<p>There are three radio buttons. If you check any of them, the
countdown animation will play. The <code>&lt;div&gt;</code> still has a
rule that tells its <code>::after</code> pseudo-element to display the
value of the <code>counter(countdown)</code>, but it no longer
<em>owns</em> the animation. The animation belongs to whichever radio
button was last clicked. The <code>countdown</code> counter belongs to
the <code>&lt;body&gt;</code> element, and the <code>div::after</code>
element can listen for its current value, because it is a child of the
<code>&lt;body&gt;</code>, which specifically <em>appears in the HTML
<strong>after</strong> any of the <code>:checked</code> radio
buttons</em>.</p>
<h2 id="restoring-ownership">Restoring ownership</h2>
<p>To give ownership back to the <code>div::after</code> element, you
can use the selector below:</p>
<pre class="language-css line-numbers" data-start="15"><code class="language-css line-numbers"><b>body:has(input:checked) div::after</b><i> {
  animation: timer 1s forwards step-end;
}</i></code></pre>
<p>The selector <code>body:has(input:checked) div::after</code> says:
“Apply the following rule to any <code>div::after</code> element when
the <code>&lt;body&gt;</code> contains an <code>&lt;input&gt;</code>
that is <code>:checked</code>.” All the radio buttons appear before the
<code>&lt;div&gt;</code> element, so if any of them is checked, the
<code>animation</code> rule will apply.</p>
<p>And now, with the <code>body:has(...)</code> function, it doesn’t
actually matter whether the <code>&lt;div&gt;</code> appears before the
radio buttons or after.</p>
<p>Reload your page so that no radio buttons are checked, and then click
any one of them. The animation plays to the end, and stops on
<code>0</code>. Now click on any of the other radio buttons.</p>
<p>Nothing happens.</p>
<p>The rule says: “If any of the radio button
<code>&lt;input&gt;</code>s is <code>:checked</code>, play the
animation. If not, stop the animation.” So it doesn’t matter which
button is checked. They all agree with each other. The
<code>&lt;div&gt;</code> receives the same message from each radio
button: “Go on! Play your animation!” But after the first message, the
<code>&lt;div&gt;</code> simply shrugs: “I have played it already. I’m
good.”</p>
<p>What happens if you specify that only the button with an
<code>id</code> of <code>play</code> is to make the animation play? Try
this:</p>
<pre class="language-css line-numbers" data-start="15"><code class="language-css line-numbers"><i>body:has(input</i><b>#play</b><i>:checked) div::after {
  animation: timer 1s forwards step-end;
}</i></code></pre>
<p>Now, if you click on the first button, the animation plays to the
end. If you click on one of the other buttons, the display reverts to
showing <code>10</code>.</p>
<h2 id="activating-the-pause-button">Activating the Pause button</h2>
<p>Add a ruleset for the <code>#pause</code> button, as shown below.
<strong>Note that I have reset the duration for both buttons to the same
value of <code>10</code>, so that you have time to click on different
buttons while the animation is in progress.</strong></p>
<pre class="language-css line-numbers" data-start="15"><code class="language-css line-numbers"><i>body:has(input#play:checked) div::after {
  animation: timer </i><b>10s</b><i> forwards step-end;
}

</i><b>body:has(input#pause:checked) div::after {
  animation: timer 10s forwards step-end;
  animation-play-state: paused;
}</b></code></pre>
<p>The new <code>input#pause</code> selector also plays the animation
when its button is selected, but it sets the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-play-state"><code>animation-play-state</code></a>
to <code>paused</code>. So if you refresh your page and then click the
middle radio button, nothing happens.</p>
<p>The CSS elves are in fact busy, but they are busy doing nothing.</p>
<p>If you click on the Play radio button, the animation will start. If
you click on the Pause button, it will … pause. You can continue the
animation from this by clicking on the Play button again. Or you can
reset the counter to <code>10</code> by clicking on the Reset
button.</p>
</section>
<!-- Who Owns the Animation -->
<section id="who-owns-the-animation" aria-labelledby="who-owns-the-animation" data-item="Owning the Animation">
<h2>
<a href="#who-owns-the-animation">Who Cares Who Owns the Animation</a>
</h2>
<p>What happens if you comment out the line that makes the
<code>#paused</code> play the animation?</p>
<pre class="language-css line-numbers" data-start="19"><code class="language-css line-numbers"><i>body:has(input#pause:checked) div::after {
  </i><b>/*</b><i> animation: timer 10s forwards step-end; </i><b>*/</b><i>
  animation-play-state: paused;
}</i></code></pre>
<p>If you start the animation with the first button and then click on
the Pause button, the animation reverts to its initial state, just as if
you had clicked on the Reset button. The
<code>animation-play-state</code> no longer knows whose animation it
refers to.</p>
<p>Here is a more elegant version of the working CSS:</p>
<pre class="language-css line-numbers" data-start="15"><code class="language-css line-numbers">body:has(input#play:checked) div::after,
body:has(input#pause:checked) div::after {
  animation: timer 10s forwards step-end;
}

body:has(input#pause:checked) div::after {
  animation-play-state: paused;
}</code></pre>
<p>Why is this more elegant? DRY! (Don’t Repeat Yourself)</p>
<p>The duration of <code>10s</code> is defined in only one place. In the
earlier version, you could set a different duration in each of the
rulesets, and unexpected things could happen. (I’m guessing that they
did, and you had to puzzle about what had gone wrong for a while. I did
warn you, but I’ve also suggested that you should be disruptive. I can’t
have it both ways, can I?)</p>
<p>The selector that you use for the different rules must apply to
exactly the same element. You can say that the animation “belongs” to
that element. The selectors used can look very different, so long as
they refer to the same animated element. These rules would also
work:</p>
<pre class="language-css line-numbers" data-start="15"><code class="language-css line-numbers">label:has(input#play:checked) ~ div::after,
body:has(input#pause:checked) div::after{
  animation-name: timer;
  animation-duration: 10s;
  animation-fill-mode: forwards;
  animation-timing-function: step-end;
}

label:has(input#pause:checked) ~ div::after {
  animation-play-state: paused;
}</code></pre>
</section>
<!-- Reset Button -->
<section id="reset-button" aria-labelledby="reset-button" data-item="A Reset Button">
<h2>
<a href="#reset-button">A Reset Button</a>
</h2>
<p>Now that you have buttons to control the animation, you can use a
<code>&lt;button type="reset"&gt;</code> inside a
<code>&lt;form&gt;</code> element to reset the buttons to their initial
states. A <code>&lt;button type="reset"&gt;</code> on its own won’t
work: it has to be inside a <code>&lt;form&gt;</code> element before it
has any effect.</p>
<p>Here’s what your HTML might look like with a form reset button:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;form&gt;
  &lt;label&gt;
    &lt;input type="radio" name="play-state" id="play"&gt;
    &lt;span&gt;Play&lt;/span&gt;
  &lt;/label&gt;
  &lt;label&gt;
    &lt;input type="radio" name="play-state" id="pause"&gt;
    &lt;span&gt;Pause&lt;/span&gt;
  &lt;/label&gt;
  &lt;label&gt;
    &lt;input type="radio" name="play-state" id="stop"&gt;
    &lt;span&gt;Reset&lt;/span&gt;
  &lt;/label&gt;

  &lt;div&gt;&lt;/div&gt;

  &lt;button type="reset"&gt;Reset Form&lt;/button&gt;
&lt;/form&gt;</code></pre>
<details class="note" open>
<summary>
Edge case
</summary>
<p>This only works because the animation is triggered by buttons. That’s
why I did not suggest it from the beginning. An animation that is
triggered automatically after the page has loaded will continue to play,
no matter how hard you press a
<code>&lt;button type="reset"&gt;</code>.</p>
</details>
</section>
<!-- Trigger a Timeout -->
<section id="trigger-a-timeout" aria-labelledby="trigger-a-timeout" data-item="Trigger a Timeout">
<h2>
<a href="#trigger-a-timeout">Triggering a Timeout</a>
</h2>
<p>Now that you can create a countdown timer, the next step is to do
something when the player’s time runs out. If CSS were a programming
language, you might do something when the value of the
<code>counter</code> reaches <code>0</code>. But CSS is a styling
language. It simply applies a series of rules to a basically static
page. It <em>uses</em> counters but it does not give you any way to
<em>read the value</em> of a counter, and certainly no way to compare
one value with another.</p>
<details class="note" open>
<summary>
Off at a tangent
</summary>
<p>One main focus of this article is counters, but to bring this part of
the story of a countdown to its logical conclusion, I’m going to have to
leave counters aside for a moment, and talk about animations and other
CSS properties, including custom properties that do not have a numerical
value.</p>
</details>
<p>You’ve used the <code>forwards</code> value of the
<code>animation-fill-mode</code> property, so whatever CSS rules are
given by the last keyframe will persist after the animation has
finished. To see this, add a new rule at the end of the
<code>@keyframes timer</code>:</p>
<pre class="language-css line-numbers" data-start="27"><code class="language-css line-numbers"><i>@keyframes timer {
  /* 10 lines skipped */
  100% { counter-increment: countdown -10;</i><b>
         color: red;
       }</b><i>
}</i></code></pre>
<p>Click on the Reset radio button and then on the Play button. Wait 10
seconds, and watch how the number <code>0</code> is now shown in red
when the animation ends.</p>
<p>Can you see where this is going? Instead of simply changing the
<code>color</code> of the animated element itself on the last keyframe,
you can change something more radical which will affect other elements.
It would be best to start a new project for this.</p>
</section>
<!-- Time to Play Again -->
<section id="time-to-play-again" aria-labelledby="time-to-play-again" data-item="Time To Play Again">
<h2>
<a href="#time-to-play">Time to play: A Race Against Time</a>
</h2>
<p>I want to use CSS to tell a story of how one person can save the
whole <del>world as we know it</del> browser from a <del>terrible</del>
simulated threat, by clicking on a button, in a race against time.</p>
<p>You can play this mini game below. The chances are that it’s already
game over for you by the time you have read this far, but you can simply
click on the Replay link:</p>
<iframe id="iframe-countdown" title="Countdown" width="300" height="150" src="https://merncraft.github.io/countdown">
</iframe>
<h2 id="creating-your-own-version-of-the-game">Creating your own version
of the game</h2>
<p>Create a new HTML file with a linked CSS file. Here’s the HTML that
you can use:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">  &lt;form&gt;
    &lt;label&gt;
      &lt;input type="checkbox"&gt;
      &lt;span&gt;&lt;/span&gt;
    &lt;/label&gt;
    &lt;div&gt;It was always too late.&lt;/div&gt;
    &lt;button type="reset"&gt;Reset&lt;/button&gt;
  &lt;/form&gt;</code></pre>
<p>You can make both the <code>label</code> and the <code>div</code>
fill the entire browser viewport, with the <code>div</code> in
front:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">label,
div {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 7vmin;
}

div {
  background-color: #900;
}</code></pre>
<p>The text “It was always too late” should now appear in dramatic black
characters on an ominous red background. The mini-game that you can
create will give the player the chance to prevent this terrible news
from appearing.</p>
<p>The <code>&lt;label&gt;</code> with a transparent background is
hidden behind this. However Reset button is also hidden behind the
<code>&lt;div&gt;</code>, because of the use of
<code>position: fixed</code>, which creates a new <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Understanding_z-index/Stacking_context">stacking
context</a>. To raise the button above the <code>fixed</code> elements,
you have to give it a <code>position</code> other than
<code>relative</code> or <code>static</code>:</p>
<pre class="language-css line-numbers" data-start="19"><code class="language-css line-numbers">button {
  position: absolute;
}</code></pre>
<h4 id="hiding-and-showing-the-message-of-doom">Hiding and showing the
message of doom</h4>
<p>To hide the red <code>&lt;div&gt;</code> you can set its
<code>display</code> to <code>none</code>. But you don’t need to do this
directly. You can use a custom CSS property with the value of
<code>none</code>. Add a new rule, and a new line to the ruleset for the
<code>div</code>:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><b>body {
  --display: none;
}</b><i>

label,
div {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 7vmin;
}

div {
  background-color: #900;
  </i><b>display: var(--display);</b><i>
}

button {
  position: absolute;
}</i></code></pre>
<p>You should now see a little lonely checkbox in the centre of your
page. If you click on it, it becomes selected but nothing else happens.
You can add a rule to change the value of the <code>--display</code>
custom property. <strong>This is not the rule that you are looking
for</strong>:</p>
<pre class="language-css line-numbers" data-start="27"><code class="language-css line-numbers">input:checked {
  --display: flex;
}</code></pre>
<p>You can try it anyway, but it won’t work. Why not?</p>
<p>Which element is this custom property applied to? Which element
<em>should</em> it be applied to, so that the <code>div</code> rule can
use it?</p>
<p>Try this instead:</p>
<pre class="language-css line-numbers" data-start="27"><code class="language-css line-numbers"><b>body:has(input:checked)</b><i> {
  --display: flex;
}</i></code></pre>
<p>Do you see the difference? In the first rule, <code>--display</code>
was set for the <code>&lt;input&gt;</code> element. The
<code>&lt;div&gt;</code> is not a child of the
<code>&lt;input&gt;</code> element, so it cannot inherit the value of
<code>--display</code>.</p>
<p>In fact, <code>&lt;input&gt;</code> elements cannot have any
children. They are written with a single self-closing tag, so there is
nowhere for a child to be added. And for this reason, they cannot have
<code>::before</code> or <code>::after</code> pseudo-elements either.
That’s why I added an empty <code>&lt;span&gt;&lt;/span&gt;</code>
element inside the label. A <code>&lt;span&gt;</code> <em>can</em> have
children —and <code>::before</code> and <code>::after</code>
pseudo-elements— and that’s good because that’s what I’ll use for the
storytelling.</p>
<p>The second rule, which uses the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has"><code>:has()</code></a>
pseudo-class, allows me to select the <code>&lt;body&gt;</code> element,
only if there is an <code>&lt;input&gt;</code> which is
<code>:checked</code> as one of its children. When you check the
checkbox, the <em><code>&lt;body&gt;</code></em> gives its
<code>--display</code> custom property the new value of
<code>flex</code>, and the <code>&lt;div&gt;</code> is a child of the
<code>&lt;body&gt;</code>, so it inherits this new value. And the red
message fills the screen.</p>
<p>You can click on the Reset button to make it disappear again.</p>
</section>
<!-- s until the End -->
<section id="the-end-is-near" aria-labelledby="the-end-is-near" data-item="The End is Near">
<h2>
<a href="#the-end-is-near">Ten Seconds until the End</a>
</h2>
<p>Actually, so far you have created the exact opposite of the story I
want to tell. I want to create a countdown where clicking this button
will <em>stop</em> the red message from appearing. This is the ending I
want your triumphant player to see:</p>
<pre class="language-css line-numbers" data-start="32"><code class="language-css line-numbers">span::before {
  content: "My hero!";
  display: block;
}
span::after {
  content: "You saved us!"
}</code></pre>
<p>You can use the same countdown timer that you used in the last
exercise, with one little difference…</p>
<pre class="language-css line-numbers" data-start="39"><code class="language-css line-numbers">@keyframes timer {
   0% { counter-increment: countdown   0; }
  10% { counter-increment: countdown  -1; }
  20% { counter-increment: countdown  -2; }
  30% { counter-increment: countdown  -3; }
  40% { counter-increment: countdown  -4; }
  50% { counter-increment: countdown  -5; }
  60% { counter-increment: countdown  -6; }
  70% { counter-increment: countdown  -7; }
  80% { counter-increment: countdown  -8; }
  90% { counter-increment: countdown  -9; }
 100% { counter-increment: countdown -10;
        --display: flex;
      }
}</code></pre>
<p>Instead of making the little harmless <code>0</code> turn red, this
will turn the whole page red, as <code>--display</code> is set to
<code>--flex</code> on the last keyframe.</p>
<p>If you add this to your CSS file, nothing will happen… yet. First you
have to start the animation.</p>
<details class="challenge" open>
<summary>
Where to add an <code>animation</code> rule
</summary>
<p>Here’s a question for you. The following rule will start the
animation. Which element should it be applied to?</p>
<pre class="language-css"><code class="language-css">animation: timer 1s step-end forwards;</code></pre>
<p>I’ve used a very short duration (<code>1s</code>) for now, so that
you will see immediately if the animation is working or not. Remember,
the final value of <code>--display</code> needs to be applied to the
<code>&lt;div&gt;</code>. Would this work?</p>
<pre class="language-css line-numbers" data-start="18"><code class="language-css line-numbers"><i>div {
  </i><b>animation: timer 1s step-end forwards;</b><i>
  background-color: #900;
  display: var(--display);
}</i></code></pre>
<p>You can try it. You can try putting the new <code>animation</code>
rule at the end of the ruleset. But, no, it doesn’t work.</p>
<p>It’s not crystal clear why not. The official documentation talks
about <a
href="https://www.w3.org/TR/css-variables-1/#animation-tainted">“animation-tainted”
custom properties</a>, and discussions on the <a
href="https://github.com/w3c/csswg-drafts/issues/411#issuecomment-890081098">W3C
GitHub Issues pages</a> show just how complex the interaction of custom
variables and keyframe animations is. I use the principle of <a
href="https://www.newscientist.com/definition/occams-razor/">Occam’s
Razor</a> here. To paraphrase: if it doesn’t work, don’t look for
anything more complex. Find a simple solution that does work.</p>
<details class="solution">
<summary>
Solution
</summary>
<p>What happens if you apply the animation to the
<code>&lt;body&gt;</code>instead?</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>body {
  --display: none;
  </i><b>animation: timer 1s step-end forwards;</b><i>
}</i></code></pre>
<p>Now the animation works. Now that you know that, you can set its
duration to <code>10s</code> to give yourself time to stop the animation
before it ends in tragedy.</p>
</details>
</details>
</section>
<!-- Averting Disaster -->
<section id="averting-disaster" aria-labelledby="averting-disaster" data-item="Averting the Disaster">
<h2>
<a href="#averting-disaster">Averting the Impending Disaster</a>
</h2>
<p>My story needs two more elements to make it even a little bit
interesting:</p>
<ol type="1">
<li>An indication that the end is coming</li>
<li>An action that will stop the animation.</li>
</ol>
<p>You can use the <code>counter(countdown)</code> to indicate how much
time is left:</p>
<pre class="language-css line-numbers" data-start="39"><code class="language-css line-numbers">input:not(:checked) {
  & ~ span::before {
    content: "Click me! Before it's too late...";
  }

  & ~ span::after {
    content: "We have only " counter(countdown) " seconds left!";
  }
}</code></pre>
<p>The selector <code>input:not(:checked)</code> adds greater
specificity to the selector that acclaims the hero
(<code>span::before</code>), so the span will show this text as long as
the checkbox is not clicked.</p>
<p>But <code>counter(countdown)</code> starts at <code>0</code> and then
goes negative. How can you get it to start at <code>10</code>? You’ll
need to add the following rule:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body {
  --display: none;
  counter-reset: countdown 10;
  animation: timer 10s step-end forwards;
}</code></pre>
<p>With this rule the countdown will be shown, and at <code>0</code>,
the “It was always too late” message will be shown.</p>
<p>However, if you click on the button to stop it, you just bring the
end closer. That’s because of the rule you added a while back. It’s time
to remove this:</p>
<pre class="language-css line-numbers" data-start="29"><code class="language-css line-numbers">/* body:has(input:checked) {
  --display: flex;
} */</code></pre>
<p>Now, if you click (anywhere) the checkbox will be checked, and you
will be praised as a hero.</p>
<details class="challenge" open>
<summary>
Unavoidable disaster?
</summary>
<p>But… wait for the 10-second countdown to end, and <strong>the
terrible red message will appear anyway</strong>.</p>
<p>You need to stop the animation.</p>
<p>Only you can do this. <em>You</em> are the hero.</p>
<p>You need to tell the <code>&lt;body&gt;</code> to pause the animation
when the checkbox is checked.</p>
<p>And here comes the twist in my story. You are not the hero after all.
You just set up the situation so that you can <em>look</em> like the
hero.</p>
<p>Does that give you a clue as to how to solve this?</p>
<p>You need to set the <code>animation-play-state</code> to
<code>paused</code> by default, and only set it to <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-play-state">whatever
the opposite of <code>paused</code> is</a> while the checkbox is
<em>not</em> checked. This means that you need to create a selector that
selects the <code>&lt;body&gt;</code> only if the checkbox is not
checked.</p>
<details class="solution">
<summary>
Your secret Bond-villain plan
</summary>
<p>Here’s one way to <em>look</em> like a hero:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>body {
  --display: none;
  counter-reset: countdown 10;
  animation: timer 10s step-end forwards </i><b>paused</b><i>;
}</i></code></pre>
<p>You make the world safe. And <em>then</em> you create the sense of
danger with this new rule:</p>
<pre class="language-css line-numbers" data-start="7"><code class="language-css line-numbers">body:has(input:not(:checked)) {
  animation-play-state: running;
}</code></pre>
<p>And since you are now the villain, you can deselect the checkbox
again, and let countdown continue. You can both save the world and let
the end come anyway.</p>
<p>Yes, but while you were doing this, the real hero (played by your
non-evil twin) crept unseen into the HTML file and changed the
<code>type</code> of the <code>&lt;input&gt;</code> from
<code>"checkbox"</code> to <code>"radio"</code>. Once a solitary radio
button is checked, it cannot be unchecked. The good guys win again!</p>
<p>One person can save the world!</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers"><i>&lt;form&gt;
  &lt;label&gt;
    &lt;input type="</i><b>radio</b><i>"&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/label&gt;
  &lt;div&gt;It was always too late.&lt;/div&gt;
  &lt;button type="reset"&gt;Reset&lt;/button&gt;
&lt;/form&gt;</i></code></pre>
</details>
</details>
</section>
<!-- Resetting Disaster -->
<section id="resetting-disaster" aria-labelledby="resetting-disaster" data-item="Reset Spells Disaster">
<h2>
<a href="#resetting-disaster">But… Reset Spells Disaster!</a>
</h2>
<p>Ha! Your non-evil twin has missed a trick! Press the Reset button,
and the countdown timer continues!</p>
<p>This is because resetting the form resets the state of the
<code>input</code> elements inside the <code>&lt;form&gt;</code>, and
this unchecks the radio button, just as if it were a checkbox.</p>
<p>You need something more radical than simply resetting the form. The
simplest solution is to reload the whole page, using a link whose
<code>href</code> is <code>/</code>. Notice that you don’t need the
<code>&lt;form&gt;</code> element any more. Here’s the final HTML:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers"><i>&lt;label&gt;
  &lt;input type="radio"&gt;
  &lt;span&gt;&lt;/span&gt;
&lt;/label&gt;
&lt;div&gt;It was always too late.&lt;/div&gt;
</i><b>&lt;&lt;a href="/" draggable="false"&gt;Replay&lt;/a&gt;
</b></code></pre>
<p>To prevent the link from moving when dragged, just like a button,
I’ve added <code>draggable="false"</code>.</p>
<p>Here’s the final CSS, where I’ve replaced the ruleset for
<code>button</code> with a nested ruleset for <code>a</code>, to make
the link look as much like a standard button as possible.</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>body {
  --display: none;
  counter-reset: countdown 10;
  animation: timer 10s step-end forwards paused;
}

body:has(input:not(:checked)) {
  animation-play-state: running;
}

label,
div {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 7vmin;
}

div {
  background-color: #900;
  display: var(--display);
}

</i><b>a {
  position: absolute;
  padding: 0.1em 0.2em;
  background-color: #eee;
  border: 1px outset #999;
  border-radius: 0.25em;
  text-decoration: none;
  color: #000;

  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -o-user-select: none;
  user-select: none;

  &:hover {
    background-color: #ddd;

    &:active {
      background-color: #ccc;
      border-style: inset;
    }
  }
}</b><i>

span::before {
  content: "My hero!";
  display: block;
}
span::after {
  content: "You saved us!"
}

input:not(:checked) {
  & ~ span::before {
    content: "Click me! Before it's too late...";
  }

  & ~ span::after {
    content: "We have only " counter(countdown) " seconds left!";
  }
}

@keyframes timer {
   0% { counter-increment: countdown   0; }
  10% { counter-increment: countdown  -1; }
  20% { counter-increment: countdown  -2; }
  30% { counter-increment: countdown  -3; }
  40% { counter-increment: countdown  -4; }
  50% { counter-increment: countdown  -5; }
  60% { counter-increment: countdown  -6; }
  70% { counter-increment: countdown  -7; }
  80% { counter-increment: countdown  -8; }
  90% { counter-increment: countdown  -9; }
 100% { counter-increment: countdown -10;
        --display: flex;
      }
}</i></code></pre>
</section>
<!-- Final Tweaks -->
<!-- Final Tweaks -->
<section id="final-tweaks" aria-labelledby="final-tweaks" data-item="Final Tweaks">
<h2>
<a href="#Final Tweaks">Final Tweaks</a>
</h2>
<p>The <a href="https://merncraft.github.io/countdown">online
version</a>of this mini story game contains some cosmetic improvements.
In particular, if you let the countdown reach one second, your version
of the game will say “We have only 1 <em>seconds</em> left!”, with
“seconds” in the plural even though there is only one.</p>
<p><a href="https://merncraft.github.io/countdown/"><img
src="images/second.webp" alt="1 second" /></a></p>
<details class="challenge" open>
<summary>
Just 1 second
</summary>
<p>In the <a href="https://merncraft.github.io/countdown">online
version</a>, this infelicity has gone. How do you think I fixed it?</p>
<p>Hint: <a href="https://merncraft.github.io/counter-styles/">counters
can count</a>.</p>
<p>Also, if the text wraps, then the line break will not occur between
the number and the word “second”. For this I’ve used a non-breaking
space, which for CSS needs to be written as <code>"\00a0"</code>. You
can click on GitHub’s Octocat logo to visit the repository where you can
find the complete source. Or you can look at the solution below.</p>
<details class="solution">
<summary>
Solution
</summary>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>body {
  --display: none;
  </i><b>counter-reset:
    countdown 10
    second 2 /* used with the seconds counter-style */
  ;</b><i>
  animation: timer 10s step-end forwards paused;
}

</i><b>/* Create a counter-style to use "2 seconds" and "1 second"
 * correctly. Use a non-breaking space between the number
 * and "seconds" so that the whole chunk "X seconds" will 
 * wrap to the next line together.
 */
@counter-style seconds {
  system: cyclic;
  symbols: "\00A0second" "\00A0seconds";
}</b></code></pre>
<pre class="skip"><code class="skip">/* lines skipped */</code></pre>
<pre class="language-css line-numbers" data-start="67"><code class="language-css line-numbers"><i>span::before {
  content: "My hero!";
  display: block;
}

span::after {
  content: "You saved us </i><b>all... with only " counter(countdown) counter(second, seconds) " to go!"</b><i>
}

input:not(:checked) {
  & ~ span::before {
    content: "Click me! Before it's too late...";
  }

  & ~ span::after {
    content: "We have only " counter(countdown) </i><b>counter(second, seconds)</b><i> " left!";
  }
}</i></code></pre>
</details>
</details>
</section>
<!-- Animating Counter Style -->
<section id="animating-counter-style" aria-labelledby="animating-counter-style" data-item="@counter-style">
<h2>
<a href="#animating-counter-style">Animating a counter-style</a>
</h2>
<p>Now you are ready to combine animating a counter and using a custom
<code>@counter-style</code> at-rule. Here’s a little puzzle where the
challenge is not finding the combination of letters that opens the lock,
but finding the order in which you need to change the letters. If you
get the right word but don’t get the right order, the CSS equivalent of
an alarm goes off when you press Enter.</p>
<p>But you should know a little about me by now. I do like words to be
spelt correctly, and I do like to move the shortest distance between
points. Of the 24 possible orders in which you can change each letter
only once, only one meets my high standards.</p>
<iframe id="iframe-lock" title="Lock" width="300" height="150" src="https://merncraft.github.io/lock">
</iframe>
<p>This article is about counters, so I won’t show you how to create the
entire puzzle. I’ll just show you how to animate the way the letters
change. I’ll get you to make a much simpler activity that uses this
technique. If want to see how the order-of-execution logic was done, you
can check out the <a href="https://github.com/MERNCraft/lock">GitHub
repository</a>.</p>
<h2 id="another-new-project">Another new project</h2>
<p>It’s time to start a new project with a basic HTML page linked to a
CSS file, just like you’ve done before. Create a new folder called
<code>Animated Counters</code>, with and <code>index.html</code> file
linked to a <code>styles.css</code> file, And then put on your <a
href="https://en.wiktionary.org/wiki/thinking_cap">Thinking Cap</a>.</p>
<details class="challenge" open>
<summary>
A checkbox and a span (or two)…
</summary>
<p>You’re going to be animating two counters, using letters instead of
numbers. The animation will start when you check a checkbox input. The
image below shows what I want your page to look like in a browser. Do
you think you can create this on your own, without looking at the HTML
and CSS below?</p>
<figure>
<img src="images/check-hi.webp" alt="Before the animation: Hi" />
<figcaption aria-hidden="true">Before the animation: Hi</figcaption>
</figure>
<p>As a clue, here’s how your page will will look like after the
animation (but you don’t have to think about the animation yet):</p>
<figure>
<img src="images/check-by.webp" alt="After the animation: By" />
<figcaption aria-hidden="true">After the animation: By</figcaption>
</figure>
<blockquote>
<p>OK, I do not normally spell “Bye” this way, and if <em>you</em> do
you might accuse me of cultural appropriation, but please forgive me.
Animating just two letters is all you need to understand the
techniques.</p>
</blockquote>
<p>“H” is the eighth letter in the alphabet, and “i” is the ninth. Later
(but not yet), you’ll create one <code>@keyframes</code> animation to
count from 8 to 2 (to replace “H” with “B”), and
another<code>@keyframes</code> animation to count from 9 to 25 (to
replace “i” with “y”).</p>
<p>Do your best with creating the “Well Hi! page! You can compare your
version with mine later, and see if yours was in fact more elegant :
)</p>
<details class="solution">
<summary>
Hints
</summary>
<p>Here are some things to think about:</p>
<ul>
<li>How to show the value of a counter</li>
<li>How to set the initial value of a counter</li>
<li>How to display a counter using upper-case letters</li>
<li>How to display a counter using lower-case letters</li>
<li>How you will (eventually) hide the checkbox input</li>
<li>How you can make a label look like a button</li>
<li>The final exclamation mark is not going to change. It’s not part of
either animation.</li>
<li></li>
</ul>
</details>
<details class="solution">
<summary>
Solution
</summary>
<p>Here’s the HTML that I used:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;label&gt;
  &lt;input type="checkbox"&gt;
  Well
&lt;/label&gt;
&lt;span&gt;&lt;/span&gt;!</code></pre>
<p>And you’ll see below the CSS that I started with. Note that the names
for built-in counter styles is case-insensitive. I could use
<code>upper-alpha</code> or <code>Upper-Alpha</code> and it would work
just as well.</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body {
  counter-set:
    letter-one 8
    letter-two 9
  ; 
}

label {
  padding: 8px 16px;
  border: 1px outset #888;
  border-radius: 8px;
  display: inline-block;
}

input {
  position: absolute;
  left: 0vw;
}

span::before {
  content: counter(letter-one, UPPER-ALPHA);
}

span::after {
  content: counter(letter-two, lower-alpha)
}</code></pre>
<p>I imagine that you will have used different names for your classes
and counters. You might have used a different selector to hold the
<code>counter-set</code> rule. You might have used two elements to show
the letters <code>Hi</code>, each with its own <code>::before</code> or
<code>::after</code> pseudo-element.</p>
<p>That’s good. If your CSS creates a similar effect to mine, don’t
change it at all. If your CSS is different now, that means that you will
have to adapt the CSS that I provide below so that it works with yours.
And that means that you might make mistakes which you will have to
correct. And each mistake that requires effort to correct helps you to
remember what you have learnt.</p>
<p>I’ve used <code>left: 0vw</code> for the absolute position of the
input element. That means that it remains visible on the page for now.
In production, I would set it to <code>-999vw</code> which will move it
far off-screen to the left. The value I use is arbitrary; all that
matters is that it is greater than the screen width of a checkbox.</p>
<p>If you want your label to behave more like a button when you hover
your mouse over it or click, you can add a couple of cosmetic rules:</p>
<pre class="language-css line-numbers" data-start="28"><code class="language-css line-numbers">label {
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -o-user-select: none;
  user-select: none;
}

label:has(:checked),
label:hover:active {
  border-style: inset;
  background-color: lightgrey;
}</code></pre>
<p>With these changes, the label appears in a different state when the
<code>&lt;input&gt;</code> that it contains is
<code>:checked</code>.</p>
</details>
</details>
<h2 id="treating-the-animation">Treating the animation</h2>
<p>Figure 14 below shows your web page should look like after you check
the checkbox.</p>
<figure>
<img src="images/grey-by.webp"
alt="Click the checkbox to run the animation: By" />
<figcaption aria-hidden="true">Click the checkbox to run the animation:
By</figcaption>
</figure>
<p>So here’s a second challenge.</p>
<details class="challenge" open>
<summary>
Create two <code>@keyframes</code> at-rules
</summary>
<p>Can you create two <code>@keyframes</code> at-rules, one to change
the letter <code>H</code> into the letter <code>B</code>, and one to
change the letter <code>i</code> into the letter <code>y</code>?</p>
<p>And can you find a CSS selector and ruleset that will do the
following?</p>
<ul>
<li>Detect when the <code>&lt;body&gt;</code> element contains a checked
input</li>
<li>Tell each of the <code>::before</code> or <code>::after</code>
pseudo-elements which <code>@keyframes</code> animation to use</li>
</ul>
<details class="solution">
<summary>
Solution
</summary>
<p>Here are the <code>@keyframes</code> at-rules that I used in my
version:</p>
<pre class="language-css line-numbers" data-start="42"><code class="language-css line-numbers">@keyframes letter-1 {
  0% { counter-increment: letter-one  +0 } /* H */
  5% { counter-increment: letter-one  +1 } /* I */
 10% { counter-increment: letter-one  +2 } /* J */
 15% { counter-increment: letter-one  +3 } /* K */
 20% { counter-increment: letter-one  +4 } /* L */
 25% { counter-increment: letter-one  +5 } /* M */
 30% { counter-increment: letter-one  +6 } /* N */
 35% { counter-increment: letter-one  +7 } /* O */
 40% { counter-increment: letter-one  +8 } /* P */
 45% { counter-increment: letter-one  +9 } /* Q */
 50% { counter-increment: letter-one +10 } /* R */
 55% { counter-increment: letter-one +11 } /* S */
 60% { counter-increment: letter-one +12 } /* T */
 65% { counter-increment: letter-one +13 } /* U */
 70% { counter-increment: letter-one +14 } /* V */
 75% { counter-increment: letter-one +15 } /* W */
 80% { counter-increment: letter-one +16 } /* X */
 85% { counter-increment: letter-one +17 } /* Y */
 90% { counter-increment: letter-one +18 } /* Z */
 95% { counter-increment: letter-one  -7 } /* A */
100% { counter-increment: letter-one  -6 } /* B */
}

@keyframes letter-2 {
  0% { counter-increment: letter-two  +0 } /* i */
  6% { counter-increment: letter-two  +1 } /* j */
 12% { counter-increment: letter-two  +2 } /* k */
 19% { counter-increment: letter-two  +3 } /* l */
 25% { counter-increment: letter-two  +4 } /* m */
 31% { counter-increment: letter-two  +5 } /* n */
 37% { counter-increment: letter-two  +6 } /* o */
 44% { counter-increment: letter-two  +7 } /* p */
 50% { counter-increment: letter-two  +8 } /* q */
 56% { counter-increment: letter-two  +9 } /* r */
 63% { counter-increment: letter-two +10 } /* s */
 69% { counter-increment: letter-two +11 } /* t */
 75% { counter-increment: letter-two +12 } /* u */
 82% { counter-increment: letter-two +13 } /* v */
 88% { counter-increment: letter-two +14 } /* w */
 94% { counter-increment: letter-two +15 } /* x */
100% { counter-increment: letter-two +16 } /* y */
}</code></pre>
<p>I <em>could</em> have used the same names for the animations as for
the counters. CSS will understand that
<code>@keyframes letter-one</code> refers to something different from
<code>counter(letter-one)</code>, but if I give them different names
then you can see that the name of the animation and the name of the
counter it increments <em>can</em> be different.</p>
<p>I’ve used intervals that are not <em>exactly</em> the same between
each frame, just because I like to keep things as simple as
possible.</p>
<p>Also, I made both animations run forwards through the alphabet, even
though running backwards would have required fewer changes. It’s my
homage to the pre-digital flight information display boards in airports,
I suppose.</p>
<figure>
<img src="images/board.jpg" alt="Flight information display board" />
<figcaption aria-hidden="true">Flight information display
board</figcaption>
</figure>
<p>Back to the <code>@keyframes</code> at-rules, notice how the “H to B”
animation flips from positive increments to negative increments when it
goes from “Z” round to “A”.</p>
<p>Here’s the CSS rule that I used to trigger the animations:</p>
<pre class="language-css line-numbers" data-start="86"><code class="language-css line-numbers">body:has(:checked) {
  span::before {
    animation: letter-1 2.0s linear forwards;
  }
  span::after {
    animation: letter-2 1.6s linear forwards;
  }
}</code></pre>
<p>I used <code>0.1s</code> for each letter change, because I just want
to see that the animation is working without wasting precious
seconds.</p>
<p>To be honest, if I really wanted not to waste time, I should run both
animations backwards. Here is another way of achieving the same overall
effect, this time with one animation finishing before the other
begins:</p>
<pre class="language-css line-numbers" data-start="95"><code class="language-css line-numbers">@keyframes letter-a {
  0% { counter-increment: letter-one -0 } /* H */
 16% { counter-increment: letter-one -1 } /* G */
 33% { counter-increment: letter-one -2 } /* F */
 50% { counter-increment: letter-one -3 } /* E */
 67% { counter-increment: letter-one -4 } /* D */
 84% { counter-increment: letter-one -5 } /* C */
100% { counter-increment: letter-one -6 } /* B */
}

@keyframes letter-b {
  0% { counter-increment: letter-two  -0 } /* i */
 10% { counter-increment: letter-two  -1 } /* h */
 20% { counter-increment: letter-two  -2 } /* g */
 30% { counter-increment: letter-two  -3 } /* f */
 40% { counter-increment: letter-two  -4 } /* e */
 50% { counter-increment: letter-two  -5 } /* d */
 60% { counter-increment: letter-two  -6 } /* c */
 70% { counter-increment: letter-two  -7 } /* b */
 80% { counter-increment: letter-two  -8 } /* a */
 90% { counter-increment: letter-two +17 } /* z */
100% { counter-increment: letter-two +16 } /* y */
}

body:has(:checked) {
  span::before {
    animation: letter-a 0.6s linear forwards;
  }
  span::after {
    animation: letter-b 1.0s 0.6s linear forwards;
  }
}</code></pre>
<details class="note" open>
<summary>
A temporary alternative
</summary>
<p>Note that if you add this alternative solution, you don’t need to
comment out the previous <code>body:has(:checked)</code> ruleset. CSS
will apply the last rules given for this selector.</p>
But after you’ve tested this alternative, delete it or comment it out.
The rest of this exercise assumes that you are using the
<code>letter-1</code> and <code>letter-2</code> <span class="citation"
data-cites="keyframes">@keyframes</span>.
</details>
<p>In <code>animation: letter-b 1.0s 0.6s</code>, the second time
(<code>0.6s</code>) refers to the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-delay"><code>animation-delay</code>
property</a>, which tells the animation how long it should wait before
it starts. (You can even use negative values for this, and the animation
will play <em>as if</em> it had begun in the past.)</p>
<p>Notice that in the <code>@keyframes letter-1</code> at-rule above,
the <code>increment</code> value jumps from <code>+18</code> for
<code>Z</code> to <code>-7</code> for A. The same is true for the
<code>@keyframes letter-1</code> rule, which flips from to
<code>-8</code> for <code>a</code> to <code>+17</code> for
<code>z</code>.</p>
<details class="note" open>
<summary>
<span class="citation" data-cites="counter-style">@counter-style</span>
systems
</summary>
<p>The built-in<code>lower-alpha</code> and <code>upper-alpha</code>
counters uses <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/@counter-style/system"><code>system: alphabetic</code></a>
in their definition. This is slightly different from
<code>system: numeric</code> in that there is no value for zero. If you
ask use a <code>content</code> declaration to show the value
<code>0</code> for an <code>alphabetic</code> counter, it fall back on
the <code>@default counter-style</code> and show exactly
<code>0</code>.</p>
<p>Because there are 26 letters in the English/Latin alphabet, the value
<code>27</code> will be represented as <code>AA</code> or
<code>aa</code>. This is not what you want in this particular case, but
you might find it useful in other cases.</p>
<p>Try it and see. Change the values that you use in your
<code>counter-set</code> rule to something like this:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body {
  counter-set:
    letter-one 0
    letter-two 27
  ; 
}</code></pre>
<figure>
<img src="images/0AA.webp"
alt="Letter 0 is “0” and letter 27 is “aa”" />
<figcaption aria-hidden="true">Letter 0 is “0” and letter 27 is
“aa”</figcaption>
</figure>
</details>
</details>
</details>
<details class="note" open>
<summary>
Fruit machine
</summary>
<p>The fruit machine animation that you saw at the beginning uses
exactly the same technique, with a few extra tricks:</p>
<ul>
<li>I’ve used an <code>@counter-style</code> at-rule that shows chosen
emojis</li>
<li>Each reel of the fruit machine shows several numbers</li>
<li>The reels themselves are animated, to rotate about the x-axis at a
regular speed, then to jump backwards each time the counter animation
changes its value.</li>
<li>The smiley face also uses a <code>counter</code> and an
<code>@counter-style</code> at-rule</li>
</ul>
<iframe id="iframe-fruit" title="Fruit" width="300" height="150" src="https://merncraft.github.io/spin">
</iframe>
<p>There are also two Spin buttons for each reel. The second button is
hidden until the first Spin button for two other reels has been
triggered. This means that the third Spin button you press triggers a
previously hidden button, which starts a different animation… which
glitches.</p>
<p>So you can never win.</p>
</details>
</section>
<!-- Running Backwards -->
<section id="running-backwards" aria-labelledby="running-backwards" data-item="Running Backwards">
<h2>
<a href="#running-backwards">Running an Animation Backwards</a>
</h2>
<p>If you’ve got to this sections, I’ll assume that you have solved the
challenges in the last section, or have worked through the solutions
that I proposed.</p>
<p>So now, if you deselect the checkbox, the display jumps back
immediately to showing <code>Hi</code>. There’s no reverse
animation.</p>
<details class="tip" open>
<summary>
Playing animations smoothly in reverse
</summary>
<p><a
href="https://pragmaticpineapple.com/smoothly-reverting-css-animations/">Nikola
Đuza at Pragmatic Pineapple</a> has some good suggestions on how to make
animations play smoothly in reverse, but none of them are helpful
here.</p>
</details>
<p>If you look at the documentation for <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-direction"><code>animation-direction</code></a>,
you’ll see that one of the options for the value is
<code>reverse</code>. You might think, like I did, that it would be easy
to use this value with the <code>@keyframe</code> animations that you
have already created. After trying, trying and trying this again and
again, it seems that I can’t force browsers to change the
<code>animation-direction</code> of an animation that has already been
applied. I have had to use a more brute-force solution. (If you find a
better one, <a
href="https://github.com/MERNCraft/css-only-games-1/issues/new">let me
know</a>.</p>
<p>My solution was to make an exact copy of my
<code>@keyframes letter-1</code> and <code>@keyframes letter-2</code>
animations. I called them <code>@keyframes letter-3</code> and
<code>@keyframes letter-4</code>. (I won’t show them here, because they
are exactly the same as the animations you can find in the solution to
the last challenge, just with different names.)</p>
<p>I added the rule below to my CSS. Notice the word
<code>reverse</code> used to set the
<code>animation-direction</code>.</p>
<pre class="language-css line-numbers" data-start="95"><code class="language-css line-numbers">body:has(input:not(:checked)) {
  span::before {
    animation: letter-3 2.0s linear reverse forwards;
  }
  span::after {
    animation: letter-4 1.6s linear reverse forwards;
  }
}</code></pre>
<p>You can restore the original values for <code>counter-set</code>
(<code>8</code> and <code>9</code>), and try this for yourself.</p>
<h2 id="an-unwanted-side-effect">An unwanted side effect</h2>
<p>You’ll see that it has an unwanted side effect. Because the checkbox
<code>&lt;input&gt;</code> starts off unchecked, this
<code>reverse</code> animation <em>plays immediately after the page is
loaded</em>.</p>
<p>What you need is a third state, which will not trigger any animations
at the start.</p>
<details class="question" open>
<summary>
body:has(input…)
</summary>
<p>Did you notice that my earlier selector was simply
<code>body:has(:checked)</code>, but this selector includes
<code>input</code>?</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body:has(input:not(:checked))</code></pre>
<p>If you don’t include <code>input</code>, the animation triggered by
the first selector you added will not run.</p>
<p>You might think that adding <code>input</code> increases the <a
href="https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity">specificity</a>
of this second selector, but that’s not the reason. The selector
<code>body:has(:not(:checked))</code> means that if <em>any</em> element
does not have a <code>:checked</code> pseudo-class (<strong>even
elements that do not ever receive a <code>:checked</code>
pseudo-class</strong>), then this selector will apply to the
<code>&lt;body&gt;</code> element.</p>
<p>If you place this rule after the previous one, it will take
precedence because it is read later from the CSS file. You
<em>could</em> use this less specific selector and put it
<em>before</em> the one you added first, but a co-worker might think
that logically it should be placed after, and move it, and break your
CSS.</p>
<p>By adding the <code>input</code> element into the selector, you tell
CSS to ignore any other kind of elements that have no
<code>:checked</code> pseudo-class. Now your co-worker can reorder your
rules in the CSS file and they will still work.</p>
<p>An alternative would be to add <code>input</code> only to your
<em>first</em> selector . Try this:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">body:has(input:checked) {
  span::before {
    animation: letter-a 0.6s linear forwards;
  }
  span::after {
    animation: letter-b 1.0s 0.6s linear forwards;
  }
}

body:has(:not(:checked)) {
  span::before {
    animation: letter-3 2.0s linear reverse forwards;
  }
  span::after {
    animation: letter-4 1.6s linear reverse forwards;
  }
}</code></pre>
<p>You see? This also works, and this time <a
href="https://specificity.keegan.st/">it <em>is</em> because of
specificity</a>. Perhaps the best solution is to use <code>input</code>
in both selectors, so that your co-workers can’t complain of you taking
confusing shortcuts.</p>
</details>
<h2 id="preventing-the-unwanted-animation-on-page-load">Preventing the
unwanted animation on page load</h2>
<p>So back to the question: How can you stop the reverse animation from
playing automatically when the page is loaded? Can you think of any
three-state solutions? There’s a hint in the subtitle below.</p>
<p>See if you can find a solution for yourself before you read on.</p>
<h3 id="radio-buttons-are-off-by-default">Radio buttons are off by
default</h3>
<p>In your HTML file, replace the single checkbox with these two radio
button:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">  <b>label&gt;
    &lt;input type="radio" name="play" id="well"&gt;
    Well
  &lt;/label&gt;
  &lt;label&gt;
    &lt;input type="radio" name="play" id="good"&gt;
    Good
  &lt;/label&gt;</b>
  <i>&lt;span&gt;&lt;/span&gt;!</i></code></pre>
<p>Both buttons share the same <code>name</code> property, so only one
can be <em>on</em> at any given time. Two states. But… both buttons can
be <em>off</em> when the page is first loaded. Two buttons with a third
state, for free!</p>
<p>So what CSS would you use with this? Notice that the radio buttons
have different <code>id</code> values. Comment out your existing rules
for <code>body:has(...)</code> (so that they don’t also get triggered)
and add this new one:</p>
<pre class="language-css line-numbers" data-start="130"><code class="language-css line-numbers">body:has(#well:checked) {
  span::before {
    animation: letter-1 2.0s linear forwards;
  }
  span::after {
    animation: letter-2 1.6s linear forwards;
  }
}</code></pre>
<p>This is how your page should look immediately after it’s loaded.
There shouldn’t be any animation.</p>
<figure>
<img src="images/well-hi.webp"
alt="No checked radio buttons, no animation" />
<figcaption aria-hidden="true">No checked radio buttons, no
animation</figcaption>
</figure>
<p>And this is how it should look after your check the Well button, and
after the animation has finished.</p>
<figure>
<img src="images/well-by.webp"
alt="The Well radio button checked, animation complete" />
<figcaption aria-hidden="true">The Well radio button checked, animation
complete</figcaption>
</figure>
<details class="question" open>
<summary>
Just for fun
</summary>
<p>On my screen, the Well label is grey, which shows that its
<code>&lt;input&gt;</code> <strong>has</strong> been
<code>:checked</code>, but the radio button beside it appears unchecked.
Can you explain why?</p>
<p>Hint: How many radio buttons are there? What position has each been
given? Do you see just a trace of blue around the edge of the radio
button that you can see?</p>
</details>
<p>If you click on the Good button, once again the display jumps back
immediately to showing <code>Hi</code>.</p>
<details class="question" open>
<summary>
Just a hint
</summary>
<p>And the <em>frontmost</em> radio button beside Well appears checked.
Does that help you answer the previous question?</p>
</details>
<p>There’s still no reverse animation. You’ll need to add a new rule for
<code>#good:checked</code>.</p>
<pre class="language-css line-numbers" data-start="139"><code class="language-css line-numbers">body:has(#good:checked) {
  span::before {
    animation: letter-3 2.0s linear reverse forwards;
  } 
  span::after { 
    animation: letter-4 1.6s linear reverse forwards;
  }
}</code></pre>
<p>The animation should play in reverse.</p>
<figure>
<img src="images/good-hi.webp"
alt="The Good radio button checked, reverse animation complete" />
<figcaption aria-hidden="true">The Good radio button checked, reverse
animation complete</figcaption>
</figure>
<h4 id="kill-the-spare">Kill the spare</h4>
<p>It would be nice to make this radio button pair behave like a single
toggle checkbox… but with a third state. When the page is first loaded,
you should see a button named “Well”. When you click on it, its name
should become “Good”. Or rather, the Well label should be replaced by
the Good label.</p>
<p>The new rule below will hide whichever label contains a
<code>:checked</code> radio button:</p>
<pre class="language-css line-numbers" data-start="148"><code class="language-css line-numbers">label:has(:checked) {
  display: none;
}</code></pre>
<details class="challenge" open>
<summary>
Solution
</summary>
<p>However, both buttons both appear when the page is first loaded, when
neither of them has been checked yet. Can you think of a second selector
for the rule above to apply to? It should say something like: “If there
is a label containing an unchecked radio button followed by another
label containing an unchecked radio button, hide the second label.”</p>
<p>You’ll need to use a sibling combinator, like <code>~</code> or
<code>+</code> to select the second label.</p>
<details class="solution">
<summary>
Solution
</summary>
<p>Here’s my solution. Can you adapt this to work with your version?</p>
<pre class="language-css wrap"><code class="language-css wrap"><b>label:has(input:not(:checked)) + label:has(input:not(:checked)),</b><i>
label:has(:checked) {
  display: none;
}</i></code></pre>
</details>
</details>
</section>
<!-- Counting Clicks 2 -->
<section id="counting-clicks" aria-labelledby="counting-clicks" data-item="Counting Clicks">
<h2>
<a href="#counting-clicks-fail">Counting Clicks: Take 2</a>
</h2>
<p>At the beginning, I hope you played with the <a
href="http://MERNCraft.github.io/calc">Arithmetic in Pure CSS</a>
calculator. Amongst other things, this allows you to cycle through the
digits from <code>0</code> to <code>9</code> and then round to
<code>0</code> again.</p>
<p>One of the questions that I suggested you ask yourself was: “How do I
cycle through all the numbers, using a single button?” Well, now it’s
time to give you an answer.</p>
<p>In the last exercise, you saw how to use just two radio buttons to
cycle through just two different states (Well and Good). Can you imagine
how you could extend this technique to cycle through all the numbers
from <code>0</code> to <code>9</code> and then start again from
<code>0</code>?</p>
<details class="note" open>
<summary>
Not with animations
</summary>
<p>OK, so technically, this exercise should not be in the Animations
section, because it doesn’t involve any animations, so it won’t help you
to think of a solution that uses animations.</p>
<p>But I did. I went down the wrong path. I went a long way down the
wrong path before I gave up. Only Firefox stayed with me all the
way.</p>
<p>If you’re interested, you can read below the story of my failed
attempt to use animations to solve this problem.</p>
</details>
<details class="tldr">
<summary>
A failed attempt
</summary>
<p>When I first planned this part, I had imagined that I would be able
to use animation and two radio buttons, one on top of the other. My plan
was to start with an animation which would repeatedly cycle through the
digits <code>0</code> to <code>9</code>, but which started off
<code>paused</code> at <code>0</code>.</p>
<p>The animation would start <code>running</code> as soon as the top
radio button was checked. When the animation reached the next keyframe,
it would move the label for the other radio button in front of the
<code>:checked</code> button, so the label for the <code>:checked</code>
button would no longer generate a <code>:hover</code> pseudo-class. I
would have a rule that would pause the animation if there was no
<code>:hover</code> pseudo-class on the <code>:checked</code> button. My
plan was that the animation would stop at the current number, and stay
there until the radio button which was <em>now</em> at the front was
clicked…</p>
<p>Fiendishly clever, I thought. But only Firefox agrees with me. Safari
doesn’t update the <code>:hover</code> class until you move the mouse,
which leads to chaos. And the Chrome CSS elves just shake their heads
and say: “Whaaat!?”</p>
<p><a href="https://merncraft.github.io/stop-motion/"><img
src="images/fail.webp" alt="fail" /></a></p>
<p>If you feel so inclined, you can <a
href="https://merncraft.github.io/stop-motion/">try it for yourself</a>
in different browsers.</p>
<p>I have included this failed attempt for a good reason, and not just
because it took a lot of effort to get it to work at all. All progress
takes effort. The article you are reading now and the demos that
accompany it took many days to write. As soon as you start writing
articles to share <em>your</em> knowledge, you will know that it’s worth
it. When you decide to explain something in detail, you discover that
there are still many details that you are unsure of, and you have to
make the effort to understand them before you can continue.</p>
<p>One of the lessons that I learned from this failure was that Safari,
Chrome and Firefox all treat <code>:hover</code> in subtly different
ways. It’s not good enough to have a good idea. You have to test early,
test often, and test on all target platforms (Thank for that mantra,
John Dowdell!)</p>
</details>
<p>To repeat my earlier question: <strong>Can you imagine how you could
extend the label-and-radio-button technique that you have just seen, to
cycle through all the numbers from <code>0</code> to <code>9</code> and
then start again from <code>0</code>?</strong></p>
<p>It’s time for new HTML and CSS files. Perhaps you’d like to call this
project “Counting to 9”.</p>
<h2 id="counting-without-counters">Counting without counters</h2>
<p>Here’s the HTML for the first solution that I succeeded with:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;input type="radio" name="d" id="d0" checked&gt;
&lt;input type="radio" name="d" id="d1"&gt;
&lt;input type="radio" name="d" id="d2"&gt;
&lt;input type="radio" name="d" id="d3"&gt;
&lt;input type="radio" name="d" id="d4"&gt;
&lt;input type="radio" name="d" id="d5"&gt;
&lt;input type="radio" name="d" id="d6"&gt;
&lt;input type="radio" name="d" id="d7"&gt;
&lt;input type="radio" name="d" id="d8"&gt;
&lt;input type="radio" name="d" id="d9"&gt;
&lt;label for="d1"&gt;1&lt;/label&gt;
&lt;label for="d2"&gt;2&lt;/label&gt;
&lt;label for="d3"&gt;3&lt;/label&gt;
&lt;label for="d4"&gt;4&lt;/label&gt;
&lt;label for="d5"&gt;5&lt;/label&gt;
&lt;label for="d6"&gt;6&lt;/label&gt;
&lt;label for="d7"&gt;7&lt;/label&gt;
&lt;label for="d8"&gt;8&lt;/label&gt;
&lt;label for="d9"&gt;9&lt;/label&gt;
&lt;label for="d0"&gt;0&lt;/label&gt;</code></pre>
<p>With no CSS, this creates a line of 10 checkboxes, followed by the
digits <code>1234567890</code> in the same order as on the keyboard.</p>
<figure>
<img src="images/radioNumbers.webp"
alt="A row of radio buttons followed by digits" />
<figcaption aria-hidden="true">A row of radio buttons followed by
digits</figcaption>
</figure>
<p>Note, though that the <em>first</em> input is checked, and this is
the input with<code>id="d0"</code>. The input for <code>0</code> is at
the beginning, but the <code>&lt;label for="d0"&gt;</code> is at the
end. Try clicking on the <em>numbers</em> to see which radio button
becomes selected.</p>
<h2 id="only-two-labels-at-a-time">Only two labels at a time</h2>
<p>I want to show only two labels at any one time:</p>
<ul>
<li>The label which is <code>for</code> the <code>:checked</code> input.
This should be visible.</li>
<li>The label which is <code>for</code> the input with the next number
in the cycle. This should be:
<ul>
<li>Invisible</li>
<li>In front of the label <code>for</code> the <code>:checked</code>
input.</li>
</ul></li>
</ul>
<p>If I use <code>position: absolute</code> for all the labels, they
will all appear one on top of each other, with the
<code>&lt;label for="d0"&gt;</code> at the top of the pile, immediately
under the mouse. I’ll make everything really big, so it’s easy to click
on the numbers:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">label {
  /* Cosmetic */
  --size: 100vmin;
  width: var(--size);
  height: var(--size);
  font-size: var(--size);
  text-align: center;

  /* Logical */
  position: absolute;
}</code></pre>
<figure>
<img src="images/absolute.webp" alt="Absolutely positioned labels" />
<figcaption aria-hidden="true">Absolutely positioned labels</figcaption>
</figure>
<p>I won’t show the <code>/* Cosmetic */</code> CSS any more, but you
might like to keep it in your project anyway.</p>
<p>I need to put the <code>&lt;label for="d1"&gt;</code> in front of the
<code>&lt;label for="d0"&gt;</code>. My trick is to:</p>
<ul>
<li>Set the <code>z-index</code> for all the labels <em>except for
<code>&lt;label for="d0"&gt;</code></em> to <code>1</code></li>
<li>Hide all the labels _except <code>&lt;label for="d0"&gt;</code> and
<code>&lt;label for="d1"&gt;</code></li>
<li>The label for <code>&lt;label for="d1"&gt;</code> (almost)
transparent. (I’ll leave just a little opacity for now, so you can see
that the number is there.)</li>
</ul>
<p>Now, a click on what seems to be the <code>0</code> will in fact be a
click on the<code>1</code>.</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>label {</i></code></pre>
<pre class="skip"><code class="skip">&lt;!-- Cosmetic lines skipped --&gt;</code></pre>
<pre class="language-css line-numbers" data-start="10"><code class="language-css line-numbers"> <i> position: absolute;</i><b>
  z-index: 1;
  display: none;
}

#d0:checked ~ [for=d0] {
  display: block;
  opacity: 1;
}

#d0:checked ~ [for=d1] {
  display: block;
  opacity: 0;
}

[for=d0] {
  z-index: 0;
}

#d9:checked ~ [for=d0] {
  z-index: 1
}</b></code></pre>
<details class="note" open>
<summary>
Troubleshooting
</summary>
<p>If you don’t see any numbers on your page, check that the first radio
button on the left i selected.</p>
</details>
<p>With the CSS shown above, if you click on the <code>0</code>,
<code>&lt;input id="d0"&gt;</code> will no longer be checked, but
<code>&lt;input id="d1"&gt;</code> will be checked instead. And the rest
of the page will go blank.</p>
<p>I now want <code>&lt;label for="d1"&gt;</code> to be visible, with
<code>&lt;label for="d2"&gt;</code> in front of it, but invisible. I can
do this by adding an additional selector to each of the rulesets that
set both <code>display</code> and <code>opacity</code>.</p>
<pre class="language-css line-numbers" data-start="15"><code class="language-css line-numbers">#d1:checked ~ [for=d1],
#d0:checked ~ [for=d0] {
  display: block;
  opacity: 1;
}
#d1:checked ~ [for=d2],
#d0:checked ~ [for=d1] {
  display: block;
  opacity: 0;
}</code></pre>
<p>Indeed, I can apply the same logic all the way up to 9.</p>
<pre class="language-css line-numbers" data-start="15"><code class="language-css line-numbers">label {
  position: absolute;
  z-index: 1;
  display: none;
}

#d9:checked ~ [for=d9],
#d8:checked ~ [for=d8],
#d7:checked ~ [for=d7],
#d6:checked ~ [for=d6],
#d5:checked ~ [for=d5],
#d4:checked ~ [for=d4],
#d3:checked ~ [for=d3],
#d2:checked ~ [for=d2],
#d1:checked ~ [for=d1], 
#d0:checked ~ [for=d0] {
  display: block;
  opacity: 1;
}
#d9:checked ~ [for=d0],
#d8:checked ~ [for=d9],
#d7:checked ~ [for=d8],
#d6:checked ~ [for=d7],
#d5:checked ~ [for=d6],
#d4:checked ~ [for=d5],
#d3:checked ~ [for=d4],
#d2:checked ~ [for=d3],
#d1:checked ~ [for=d2], 
#d0:checked ~ [for=d1] {
  display: block;
  opacity: 0.1;
}

[for=d0] {
  z-index: 0;
}</code></pre>
<p>When I click on a digit, the next digit becomes fully opaque, and
shows the label for <em>its</em> next digit very transparently in front
of it.</p>
<p>This works until I click on the <code>8</code> and the label for
<code>9</code> becomes fully opaque. But there is no sign of a
semi-transparent <code>0</code>.</p>
<p>I can follow what is happening in the Developer Tools Inspector:</p>
<figure>
<img src="images/inspector.webp" alt="Using the browser’s Inspector" />
<figcaption aria-hidden="true">Using the browser’s
Inspector</figcaption>
</figure>
<p>When I get to <code>9</code>, I want the next click to apply to the
<code>&lt;label for="d0"&gt;</code>. In the Inspector, this label
<em>appears</em> to be in a higher layer than the
<code>&lt;label for="d9"&gt;</code>, but just now, I set the
<code>z-index</code> of every label <em>except</em> the
<code>&lt;label for="d0"&gt;</code> to <code>1</code>, so that I could
click on the <code>&lt;label for="d1"&gt;</code> instead. Now I’ll need
one last rule to fix this for this one specific case:</p>
<pre class="language-css line-numbers" data-start="46"><code class="language-css line-numbers">#d9:checked ~ [for=d0] {
  z-index: 1
}</code></pre>
<p>Try it! You should be able to cycle through all the numbers.</p>
<h2 id="detecting-which-number-is-currently-checkd">Detecting which
number is currently checkd</h2>
<p>This system has some advantages. At any time, I can use a selector
which contains (say) <code>#d3:checked</code>, to check if the player is
currently looking at a <code>3</code>. This makes it easy to apply other
rules to other elements when you select the answer that I want you to
select.</p>
<details class="pivot" open>
<summary>
Plus and minus
</summary>
<p>A major disadvantage is that you must click on the current number
itself if you want it to increase. This is not an intuitive action.</p>
<p>It would be better to have a specific button that says
<code>+</code>. And if you add a <code>+</code> button, why not add a
<code>–</code> button, too?</p>
<p><strong>But, wait a minute… How can you make two buttons that work in
opposite directions?</strong></p>
</details>
</section>
<!-- Two winged Labels -->
<section id="two-winged-labels" aria-labelledby="two-winged-labels" data-item="Two-winged Labels">
<h2>
<a href="#two-winged-labels">A Label with Two Wings</a>
</h2>
<details class="tip" open>
<p>The task now is to create buttons Plus and Minus buttons that allow
you to cycle through all the numbers.</p>
<summary>
Keeping it small
</summary>
<p>Whenever I am working in a big project and I come across a new
problem, I create a new baby project to test my ideas and make all the
mistakes I need to find a solution to this new problem. When I finally
understand what I am doing, then I go back to the big project and apply
my new solution.</p>
<p>Treating a new problem in isolation frees up your mind and makes it
much easier to think in new ways.</p>
</details>
<p>So. New problem. New HTML and CSS files. You know the drill. “Plus
and Minus” might be a good name for your project folder.</p>
<h2 id="preview">Preview</h2>
<p>Here’s how the page you are about to create should work, but you can
just create a proof-of-concept which doesn’t have all the pretty
styling.</p>
<iframe id="iframe-plus-and-minus" title="Plus and Minus" width="300" height="150" src="https://merncraft.github.io/plus-and-minus">
</iframe>
<p>Here’s some HTML to get you started.</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">  &lt;label class="d0"&gt;
    &lt;span class="minus"&gt;–&lt;/span&gt;
    &lt;input type="radio" name="d" id="d0" checked&gt;
    &lt;span class="plus"&gt;+&lt;/span&gt;
  &lt;/label&gt;
  &lt;label class="d1"&gt;
    &lt;span class="minus"&gt;–&lt;/span&gt;
    &lt;input type="radio" name="d" id="d1"&gt;
    &lt;span class="plus"&gt;+&lt;/span&gt;
  &lt;/label&gt;
  &lt;label class="d2"&gt;
    &lt;span class="minus"&gt;–&lt;/span&gt;
    &lt;input type="radio" name="d" id="d2"&gt;
    &lt;span class="plus"&gt;+&lt;/span&gt;
  &lt;/label&gt;
  &lt;!-- Something is missing here --&gt;
  &lt;span class="display"&gt;&lt;/span&gt;</code></pre>
<details class="question" open>
<summary>
Reading the code
</summary>
<p>Take a good look at it and see if you can make sense of all the
labels, inputs and spans. Why does each label have two spans? Can you
see how this will generate something that looks a little like the
Preview above?</p>
</details>
<h2 id="heres-how-the-html-looks-in-a-browser.">Here’s how the HTML
looks in a browser.</h2>
<figure>
<img src="images/minusAndPlus.webp" alt="What the HTML shows" />
<figcaption aria-hidden="true">What the HTML shows</figcaption>
</figure>
<p>This short extract only gives you three labels. They have radio
buttons with the <code>id</code>s <code>d0</code>, <code>d1</code> and
<code>d9</code>, but this is enough for you to check if this creates
some kind of cycle. You can add more labels with the same structure
later.</p>
<p>Each label has two spans: one with the class <code>"minus"</code>,
one with the class <code>"plus"</code>.</p>
<details class="challenge" open>
<summary>
Showing the right spans
</summary>
<p>Suppose <code>&lt;input id="d1"&gt;</code> is checked.</p>
<p>Can you write a CSS rule that will show <em>only</em>:</p>
<ul>
<li>The <code>.minus</code> span for inside the
<code>&lt;label class="d0"&gt;</code></li>
<li>The <code>.plus</code> span for inside the
<code>&lt;label class="d2"&gt;</code>?</li>
</ul>
<p>Note that if any child of <code>&lt;label class="dX"&gt;</code> is
clicked, the associated <code>&lt;input id="dX"&gt;</code> will become
checked.</p>
<details class="solution">
<summary>
Solution
</summary>
<p>Here is the strict minimum that you need:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">label span {
  display: none;
}
body:has(#d1:checked) {
  .d0 span.minus { display: block }
  .d2 span.plus { display: block }
}</code></pre>
<p>**Note that I have used <code>label span</code> for the first
selector, and not just <code>span</code>. because I don’t want to hide
<code>span.display</code>.</p>
<p>This is what it will look like <strong>if you check the checkbox for
<code>#d1</code></strong>:</p>
<figure>
<img src="images/plus-minus.webp"
alt="input#d1 is checked. Visible: the minus span for .d0, the plus span for .d2" />
<figcaption aria-hidden="true">input#d1 is checked. Visible: the minus
span for .d0, the plus span for .d2</figcaption>
</figure>
<p>If you click either the <code>–</code> or the +, a different checkbox
will be checked, and the <code>–</code> and the + will disappear.</p>
</details>
</details>
<h2 id="not-just-cosmetic">Not just cosmetic</h2>
<p>I’m going to suggest, <em>as a hint that you can use later</em>, that
you make the <code>-</code> and <code>+</code> elements bigger.</p>
<pre class="language-css line-numbers" data-start="11"><code class="language-css line-numbers">span {
  --size: 64px;
  font-size: var(--size);
}</code></pre>
<h2 id="showing-the-value">Showing the value</h2>
<p>The HTML I gave you includes this:
<code>&lt;span class="display"&gt;&lt;/span&gt;</code>, but nothing is
displayed in this span yet. I think you can guess that it’s meant to
display a digit.</p>
<p>Perhaps, if you think about it, this digit could a
<code>counter</code> used in a <code>content</code> declaration?</p>
<p>You could add a line to the ruleset for the <code>#d1:checked</code>
button, and a new rule for the <code>span.display</code>:</p>
<pre class="language-css line-numbers" data-start="5"><code class="language-css line-numbers"><i>body:has(#d1:checked) {
  </i><b>counter-set: digit 1;</b><i>
  .d0 span.m { display: block }
  .d2 span.p { display: block }
}

span {
  --size: 64px;
  font-size: var(--size);
}

</i><b>span.display::after {
  content: counter(digit)
}</b></code></pre>
<p>This would work. It would definitely work. But there’s a problem.</p>
<p>CSS won’t let you <em>read</em> the value of a <code>counter</code>,
except to display it in a <code>::before</code> or <code>::after</code>
element. So if you want to use the value in actual calculations, you’ll
need to think of something else.</p>
<details class="question" open>
<summary>
A different solution?
</summary>
<p>Is there a different CSS property that you could set… and then
display the value of this different property?</p>
<p>Hint: how did I set the <em>size</em> of the spans that show the
<code>–</code> and <code>+</code> buttons?</p>
</details>
<p>How about this:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><b>body {
  /* Declare a custom property and use it to set a counter */
  --counter: 0;
  counter-set: digit var(--counter);
}</b><i>

label span {
  display: none;
}

body:has(#d1:checked) {
  </i><b>/* Set the custom property to a new value */
  --counter: 1;</b><i>
  .d0 span.minus { display: block }
  .d2 span.plus { display: block }
}</i></code></pre>
<p>Custom properties have the advantage that they can be read from any
child of the element in which they are declared. They can even be read
by JavaScript. Try this in the Developer Console:</p>
<pre class="language-javascript line-numbers"><code class="language-javascript line-numbers">getComputedStyle(document.body).getPropertyValue("--counter")</code></pre>
<figure>
<img src="images/getPropertyValue.webp"
alt="getPropertyValue(“–counter”)" />
<figcaption aria-hidden="true">getPropertyValue(“–counter”)</figcaption>
</figure>
<details class="tip" open>
<summary>
JavaScript in custom CSS properties
</summary>
<p>And if you are <em>really</em> sneaky, you can even store JavaScript
code inside a custom CSS property. The <a
href="https://www.w3.org/TR/css-variables-1/#syntax">official
specifications for Custom Property Value Syntax</a> explicitly requires
browsers to make this possible. ( See “EXAMPLE 7”)</p>
</details>
<h2 id="the-trick">The trick</h2>
<p>You can’t <em>show</em> the value of a custom property directly, but
if it is a number, then you can use it with <code>counter-set</code>,
and then get a <em><code>counter</code></em> to display it for you. You
can’t read the value of a <code>counter</code>, but you can read the
value of a custom property. Win-win.</p>
</section>
<!-- Repeating a Pattern -->
<section id="repeating-a-pattern" aria-labelledby="repeating-a-pattern" data-item="Repeating a Pattern">
<h2>
<a href="#repeating-a-pattern">Repeating a Pattern</a>
</h2>
<p>You want to be able to cycle through the numbers <code>0</code> to
<code>9</code>, but for now, you can only show the number <code>1</code>
(if the right radio button is checked). You need more labels with spans
and radio buttons in your HTML page.</p>
<details class="note" open>
<summary>
Solution
</summary>
<p>For brevity, I’m not going to list them all. You should be able to
see the pattern and the missing labels.</p>
</details>
<pre class="language-html line-numbers"><code class="language-html line-numbers"><i>  &lt;label class="d0"&gt;
    &lt;span class="minus"&gt;–&lt;/span&gt;
    &lt;input type="radio" name="d" id="d0" checked&gt;
    &lt;span class="plus"&gt;+&lt;/span&gt;
  &lt;/label&gt;
  &lt;label class="d1"&gt;
    &lt;span class="minus"&gt;–&lt;/span&gt;
    &lt;input type="radio" name="d" id="d1"&gt;
    &lt;span class="plus"&gt;+&lt;/span&gt;
  &lt;/label&gt;
 &lt;label class="d2"&gt;
    &lt;span class="minus"&gt;–&lt;/span&gt;
    &lt;input type="radio" name="d" id="d2"&gt;
    &lt;span class="plus"&gt;+&lt;/span&gt;
  &lt;/label&gt;
  </i><b>&lt;!-- Add a label for 3 with the appropriate class and id --&gt;
  &lt;label class="d3"&gt;
    &lt;span class="minus"&gt;–&lt;/span&gt;
    &lt;input type="radio" name="d" id="d3"&gt;
    &lt;span class="plus"&gt;+&lt;/span&gt;
  &lt;/label&gt;
  &lt;!-- Continue the sequence up to 9 (4-8 are skipped here) --&gt;
  &lt;label class="d9"&gt;
    &lt;span class="minus"&gt;–&lt;/span&gt;
    &lt;input type="radio" name="d" id="d9"&gt;
    &lt;span class="plus"&gt;+&lt;/span&gt;
  &lt;/label&gt;</b><i>
  &lt;span class="display"&gt;&lt;/span&gt;</i></code></pre>
<h2 id="more-css">More CSS</h2>
<p>You’l also need more CSS rules, each with a similar pattern.</p>
<details class="note" open>
<summary>
Cheating
</summary>
<p>In the CSS below, I’ve cheated to make the <code>.d3</code> label
jump directly to <code>.d9</code>, to match the HTML entries above and
to keep the code short.</p>
</details>
<pre class="language-css line-numbers"><code class="language-css line-numbers"><i>body {
  --counter: 0;
  counter-set: digit var(--counter);
}

label span {
  display: none;
}

</i><b>body:has(#d0:checked) {
  --counter: 0;
  .d9 span.minus { display: block }
  /* Notice that the "minus" span belongs to 9 */
  .d1 span.plus  { display: block }
}</b><i>
body:has(#d1:checked) {
  --counter: 1;
  .d0 span.minus { display: block }
  .d2 span.plus  { display: block }
}
</i><b>body:has(#d2:checked) {
  --counter: 2;
  .d1 span.minus { display: block }
  .d3 span.plus  { display: block }
}
body:has(#d3:checked) {
  --counter: 3;
  .d2 span.minus { display: block }
  /* I've cheated: I used .d9 instead of .d4 */
  .d9 span.plus  { display: block }
}
/* And so on, up to 9 ... */
body:has(#d9:checked) {
  --counter: 9;
  .d3 span.minus { display: block } /* &lt;&lt;&lt; .d3/.d8 cheat */
  /* Notice that the "plus" span belongs to 0 */
  .d0 span.plus  { display: block }
}</b></i>

span {
  --size: 64px;
  font-size: var(--size);
}

span.display::after {
  content: counter(digit);
}</i></code></pre>
<p>I suggest that you add the following cosmetic rulesets, so the
<code>-</code> and <code>+</code> spans don’t keep changing places.</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">span {
  position: absolute;
  top: 30px;
}
span:first-child {
  left: 10px;
}
span:last-child {
  left: 60px;
}</code></pre>
<p>Make these changes to your project, and then check if the plus and
minus buttons work as expected.</p>
<details class="question" open>
<summary>
Cycling from 9 to 0
</summary>
<p>Did you notice that the “plus” for 9 and the “minus” for 0 are
different? That’s what makes the system cycle.</p>
</details>
<details class="note" open>
<summary>
No repeat loops
</summary>
<p>This exercise demonstrates one of the frustrations of writing
CSS-only activities. There are no repeat loops or Boolean logic in CSS.
As a result, every pattern has to be written out methodically, chunk by
chunk, and every variant on the pattern needs to be manually edited.</p>
<p>If you are familiar with <a href="https://sass-lang.com/">SASS</a>,
you can use its <a
href="https://sass-lang.com/documentation/at-rules/control/">flow
control features</a> to generate patterns in CSS. You can use JavaScript
in NodeJS to generate corresponding patterns for HTML.</p>
<p>Nonetheless, in many cases, your CSS-only activities will require
many many lines of code, most of which you will have to write by
hand.</p>
</details>
<h2 id="next-step-making-a-calculator">Next step: making a
calculator?</h2>
<p>The technique that I have described here is exactly the same as the
one I used to create the <a
href="https://merncraft.github.io/calc/">Arithmetic in Pure CSS</a>
activity that you tried out at the beginning.</p>
<iframe id="iframe-arithmetic" title="Arithmetic" width="300" height="150" src="https://merncraft.github.io/calc">
</iframe>
<p>It’s true that the span “buttons” are a little more discreet there.
There’s also a little calculation that is done with the values of the
custom CSS properties that hold the digit values, and a little trick to
show <code>NaN</code> if you try to divide by <code>0</code>. But you
should be able to reverse engineer everything that I did there… and if
you get stuck you can always visit the GitHub repo and see all the CSS
for yourself.</p>
</section>
<!-- Hover -->
<section id="hover" aria-labelledby="hover" data-item="Hover">
<h2>
<a href="#hover">Incrementing with <code>:hover</code></a>
</h2>
<p>Your browser generates a <code>:hover</code> pseudo-class for every
element that is currently under the pointer. If the pointer is a mouse,
then there will always be a <code>:hover</code> pseudo-class created
somewhere while the mouse is over the page.</p>
<p>If the pointer is a finger or a stylus on a touch screen, than a
<code>:hover</code> pseudo-class is created when there is the first
actual contact with the screen… and then (on Chrome for Android, at
least), the <code>:hover</code> pseudo-class remains, even though no-one
is touching the screen.</p>
<p>Here’s the simplest “game” I could think of that illustrates my
point, inspired by “The Floor is Lava”. On a computer screen, you have
to move your mouse as the green safe space gets smaller and floats away.
I haven’t found any way to check that touchscreen players doesn’t just
simply lift their fingers and uncheck the checkbox. And yes: I’ve
<em>tried</em>. If you can find a solution, please, <a
href="https://github.com/MERNCraft/Pure-CSS-Games/issues/new">send me a
link to <em>your</em> articles</a> so that I can learn from you.</p>
<iframe id="iframe-lava" title="Lava" width="300" height="150" src="https://merncraft.github.io/lava">
</iframe>
<p>In other words: if your game is intended for playing on touchscreens,
using <code>:hover</code> as a major feature of your game is likely to
cause you headaches. If you use it for inessential features, then you
can have fun with it.</p>
<p>Also, even in a game with a mouse, a custom <code>:hover</code>
feature will stop working as soon as the mouse moves over a button or
other element that is not a child of the element whose
<code>:hover</code> you are tracking. It can be tricky to get buttons
and <code>:hover</code> to work together… but it can be <em>tricky</em>
in a good way.</p>
<p>So, with those warnings out of the way, would you like to have some
fun with <code>:hover</code>… and with counters?</p>
<p>For the last time (in this article at least), I’ll ask you to create
a new HTML file with CSS file linked to it. Here’s what you’ll be making
(except that yours will have a white background.):</p>
<iframe id="iframe-hover" title="Hover" width="300" height="300" src="https://merncraft.github.io/hover">
</iframe>
<p>Here’s some HTML…</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers">&lt;div title="one"&gt;
  &lt;div title="two"&gt;
    &lt;div title="three"&gt;
      &lt;div title="four"&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>… and some CSS:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">div {
  --size: 15vmin;
  --line: 1vmin;
  --delta: calc(var(--size) + var(--line) * 2);

  position: relative;
  top: var(--delta);
  left: var(--delta);
  width: var(--size);
  height: var(--size);
  border: var(--line) solid grey;

  &:hover {
    color: red;
    border-color: orange;
    counter-increment: divs;
  }

  &::after {
    content: attr(title) " " counter(divs);
  }
}</code></pre>
<p>Open your page in your browser and move your mouse over the different
<code>&lt;div&gt;</code>s:</p>
<figure>
<img src="images/nestedHover.webp"
alt="Hovering over nested elements" />
<figcaption aria-hidden="true">Hovering over nested
elements</figcaption>
</figure>
<p>The nested <code>&lt;div&gt;</code> elements are clearly not
overlapping. In my screenshot above, the mouse is clearly over
<code>div.three</code>. And yet three of the <code>&lt;div&gt;</code>
elements have an orange border. This must have been caused by the
rule:</p>
<pre class="language-css line-numbers" data-start="13"><code class="language-css line-numbers">  &:hover {
    color: red;
    border-color: orange;
    counter-increment: divs;
  }</code></pre>
<p>And the text of <em>all</em> of the elements is red. And yes, the CSS
elves are busy with some <code>counter-increment</code> activity as
well. There is no <code>counter: divs 0</code> declaration, but they
have understood that they need to behave as if the declaration were
there.</p>
<p>As you move your mouse around, the elements which are given a
<code>:hover</code> pseudo-class will change. On a touchscreen, you can
tap different parts of the screen and see how the <code>:hover</code>
effect remains even after you remove your finger.</p>
<details class="note" open>
<summary>
Where does ::after go?
</summary>
<p>Notice that the <code>::after</code> pseudo-element for the first
three <code>&lt;div&gt;</code>s is shown <em>below</em> the
<code>&lt;div&gt;</code>, but the <code>::after</code> pseudo-element
for the fourth <code>&lt;div&gt;</code> appears <em>inside</em> it.
That’s because the first three have children. The <code>::after</code>
pseudo-element is shown <em>after</em> the children… or rather, after
where the children would be if they had not been given a different
<code>relative</code> <code>position</code>.</p>
</details>
<p>The border of the <code>&lt;div&gt;</code> under the mouse and all
its parents goes orange, because hovering, like the credit for a child’s
achievements, is claimed by its parents, all the way back to the first
generation.</p>
<p>The text of all the elements goes red when any one of them is under
the mouse, because <code>color</code>, like eye-colour and debt for
humans, is inherited from an element’s parents.</p>
</section>
<!-- How the Map Works -->
<section id="how-the-map-works" aria-labelledby="how-the-map-works" data-item="How The Map Works">
<h2>
<a href="#how-the-map-works">How The Map Works</a>
</h2>
<p>You’ve already seen the Map activity. Now that you have an
understanding of how CSS counters and <code>@counter-style</code> works,
you can make sense of the tricks I have used.</p>
<iframe id="iframe-map-2" title="Map" width="500" height="150" src="https://merncraft.github.io/map">
</iframe>
<h2 id="counting-nesting-depth">Counting nesting depth</h2>
<p>The Map uses counters to detect how deeply nested the element
immediately under the touch point is.</p>
<p>The relief pattern for the hill and the sea is created by nested
<code>&lt;div&gt;</code> elements:</p>
<pre class="language-html line-numbers" data-start="21"><code class="language-html line-numbers">      &lt;div class="hill-1 contour"&gt;
        &lt;div class="hill-2"&gt;
          &lt;div class="hill-3"&gt;
            &lt;div class="hill-4"&gt;
              &lt;div class="hill-5"&gt;&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class="sea-1 contour"&gt;
        &lt;div class="sea-2"&gt;
          &lt;div class="sea-3"&gt;
            &lt;div class="sea-4"&gt;
              &lt;div class="sea-5"&gt;&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;</code></pre>
<p>Suppose the mouse is over <code>&lt;div class="hill-4"&gt;</code>. As
you saw in the last section, four of the <code>div</code>s with a class
whose name begins with <code>hill</code> will have a <code>:hover</code>
pseudo-class: <code>div class="hill-4"&gt;</code> itself and all its
parents.</p>
<h2 id="counter-style-for-height-or-depth"><span class="citation"
data-cites="counter-style">@counter-style</span> for height or
depth</h2>
<p>I’ve created an <code>@counter-style</code> at-rule to display a
string that represents a height or a depth for each of its values:</p>
<pre class="language-css line-numbers"><code class="language-css line-numbers">@counter-style relief {
  symbols: "100m" "200m" "300m" "400m" "500m";
}</code></pre>
<p>I increment a <code>relief</code> counter, for each <code>div</code>s
with a class whose name begins with <code>hill</code> which has a
<code>:hover</code> class.</p>
<pre class="language-css line-numbers" data-start="130"><code class="language-css line-numbers">div[class|=hill]:hover {
  counter-increment: relief;
}</code></pre>
<details class="note" open>
<summary>
counter and <span class="citation"
data-cites="counter-style">@counter-style</span> with the same name
</summary>
<p>The CSS elves are smart enough to distinguish between a
<code>counter</code> and an <code>@counter-style</code> that have the
same name, so it makes sense to use the same name for both, to indicate
that they work together.</p>
</details>
<p>And I use a <code>::before</code> pseudo-element on the
<code>&lt;p&gt;</code> element centred at the top of the page to show
the height. But I hide this <code>::before</code> element…</p>
<pre class="language-css line-numbers" data-start="168"><code class="language-css line-numbers">p.relief::before {
  content: "Height: " counter(relief, relief);
  display: none;
}</code></pre>
<p>…unless the lowest <code>div.hill-1</code> element has
<code>:hover</code> applied to it:</p>
<pre class="language-css line-numbers" data-start="176"><code class="language-css line-numbers">.hill-1:hover ~ p.relief::before {
  display: inline;
}</code></pre>
<h2 id="dealing-with-the-grid">Dealing with the grid</h2>
<p>The grid pattern is even more complex: ten vertical rectangular
<code>&lt;div&gt;</code>s, one for each of the columns, all nested
inside each other, and inside each column.</p>
<p>In this composite image below, you’ll see how the mouse is hovering
over a <code>&lt;div class="row-3"&gt;</code>, which is a child of all
the following:</p>
<ul>
<li><code>&lt;div class="row-2"&gt;</code></li>
<li><code>&lt;div class="row-1"&gt;</code></li>
<li><code>&lt;div class="col-2"&gt;</code></li>
<li><code>&lt;div class="col-1"&gt;</code></li>
</ul>
<figure>
<img src="images/hoverB3.webp" alt="Hovering over cell B3" />
<figcaption aria-hidden="true">Hovering over cell B3</figcaption>
</figure>
<p>In the CSS, a counter called <code>col</code> is incremented for each
<code>div</code> whose class name begins with <code>col</code>…</p>
<pre class="language-css line-numbers" data-start="193"><code class="language-css line-numbers">div[class^=col]:hover {
  counter-increment: col;
}</code></pre>
<p>… and a counter called <code>row</code> is incremented for each
<code>div</code> whose class name begins with <code>row</code>…</p>
<pre class="language-css line-numbers" data-start="212"><code class="language-css line-numbers">div[class^=row]:hover {
  counter-increment: row;
}</code></pre>
<p>Each <code>div</code> whose class name begins with <code>row</code>
also has its own <code>::before</code> element, whose
<code>content</code> is determined by the <code>col</code> and
<code>row</code> counters. However, these <code>::before</code> elements
acquired not shown…</p>
<pre class="language-css line-numbers" data-start="218"><code class="language-css line-numbers">div[class^=row]::before {
  content: counter(col, upper-alpha) counter(row);
  position: absolute;
  width: 30px;
  line-height: 30px;
  text-align: center;
  display: none;
}</code></pre>
<p>… except for the <code>div</code> which is <em>immediately</em> under
the mouse:</p>
<pre class="language-css line-numbers" data-start="227"><code class="language-css line-numbers">/* Show a label for the hovered cell... */
div[class^=row]:hover::before {
  display: inline-block;
}
/* ...but not for all the cells in the parent rows */
div[class^=row]:has(:hover)::before {
  display: none;
}</code></pre>
</section>
<!-- The Heist -->
<section id="the-heist" aria-labelledby="the-heist" data-item="The Heist">
<h2>
<a href="#the-heist">The Heist</a>
</h2>
<p>So here’s a challenge that I set for myself: How much can I do using
just <code>:hover</code> as the trigger? How much can I do using no
checkboxes, no radio buttons, no details elements.</p>
<p>Here’s what I came up with:</p>
<iframe id="iframe-heist" title="Heist" width="600" height="216" src="https://merncraft.github.io/heist/">
</iframe>
<p>Each action is performed in a nested <code>&lt;div&gt;</code> and the
nesting gets deeper as the story progresses. As a result, the innermost
element with a <code>:hover</code>pseudo-class maintains a :hover
pseudo-class on all its parents. In this way, any changes made at one
level continue to apply to the inner levels.</p>
<p>However, if you move your mouse off the animation, it will reset and
the story will start over from the beginning.</p>
<p>On touchscreen devices, the innermost element with a :hover
pseudo-class retains this class even after the contact with the
touchscreen ceases. If a child <code>&lt;div&gt;</code> is activated by
a touch on its parent, the child <code>&lt;div&gt;</code> does not
immediately receive a :hover pseudo-class. (With a mouse, the child
<code>&lt;div&gt;</code> will receive its pseudo-class as soon as the
mouse moves, if not sooner.)</p>
<p>The numbered instructions at the top are set using a
<code>counter</code> for the number of <code>&lt;div&gt;</code> which
have a <code>:hover</code> pseudo-class. The text is set by an
<code>@counter-style</code> at-rule.</p>
<p>Click on the GitHub octocat icon to visit the GitHub repository.</p>
<p><strong><em>Enjoy!</em></strong></p>
</section>
<!-- Game to Complete -->
<section id="Game to Complete" aria-labelledby="Game to Complete" data-item="A Game to Complete">
<h2>
<a href="#Game to Complete">Complete a Game by Adding Counters</a>
</h2>
<p>I wrote at the beginning of this article that I would not be showing
you, step by step, how to build a particular game. However, I do want to
give you the chance to test whether my explanations have made good sense
to you.</p>
<p>I’ve created a pure CSS game that uses the techniques that I have
described above. You can find the GitHub Repository <a
href="https://github.com/MERNCraft/path">here</a>.</p>
<iframe id="iframe-path" title="Path" width="300" height="300" src="https://merncraft.github.io/path">
</iframe>
<details class="challenge" open>
<summary>
Adding counters
</summary>
<p>If you clone the repository and launch the game on your own computer,
you will find that the scoring and timing system is missing. Using the
knowledge that you have just acquired, can you get your local version of
the game to behave the same as the online version?</p>
<p>The logic of the game (starting and stopping it, picking up the gold
tokens, showing the result when you reach the end) is already written.
You’ll find the CSS for this in a file called <code>styles.css</code>.
You should not need to change anything in this file or in the
<code>index.html</code> file.</p>
<p>There is a second CSS file attached to the HTML page. It’s called
<code>counters.css</code>, and it currently contains no CSS at all. You
should now be able to write CSS of your own that:</p>
<ul>
<li>Shows the score</li>
<li>Shows an emoji that gets happier as the score increases</li>
<li>Shows how many seconds have passed since the player clicked on the
green Start button</li>
<li>Stops the timer when the game is over.</li>
</ul>
<p>And of course, you can use this as the starting point for your own
remixed version of the game. I’m sure that, artistically, your CSS power
does exceed my own…</p>
</details>
</section>
<!-- What You Know Now -->
<section id="what-you-know-now" aria-labelledby="what-you-know-now" data-item="What You Know Now">
<h2>
<a href="#what-you-know-now">What I Hope You Know Now</a>
</h2>
<p>If you have worked your way through all the explanations and the
exercises up to here then you should have a clearer idea about:</p>
<ol type="1">
<li>Using checkboxes and radio buttons to store state</li>
<li>Using animations to change state</li>
<li>Using <code>::before</code> and <code>::after</code>
pseudo-elements</li>
<li>Using <code>z-index</code> to reorder elements</li>
<li>Using the <code>:hover</code> pseudo-class to intercept the actions
of the mouse</li>
<li>Writing selectors that control the logic</li>
<li>Using custom CSS properties</li>
</ol>
<p>Specifically, you should have a deeper understanding about how you
can use and abuse CSS <code>counter</code>s,
<code>@counter-style</code>s, <code>list-style-type</code> and styling
the <code>::marker</code> pseudo-element for lists.</p>
<p>You can apply this new knowledge not just to creating CSS-only
activities, but to the CSS that you use in any project.</p>
<h2 id="thinking-outside-the-box">Thinking outside the box</h2>
<p>More importantly, I hope that you have picked up some ideas on how to
explore a topic, how to test its limits, how to take it in new
directions.</p>
<p>I’ve suggested that you have fun making mistakes and testing
unorthodox approaches. Be sure, though, to test in all the major
browsers as you go, so that you do not create something that only works
in one browser when the stars are correctly aligned.</p>
<details class="feedback" open>
<summary>
Tell me about your own creations
</summary>
<p>I’m hoping that you will be inspired to create some CSS-only
activities of your own. If you do, please <a
href="https://github.com/MERNCraft/Pure-CSS-Games/issues/new">send me a
link to your creations</a>, so that I can learn from you.</p>
</details>
</section>
<!-- Intro -->
<section id="intro" aria-labelledby="intro" data-item="Introduction">
<h2>
<a href="#intro">Introduction</a>
</h2>
<p>CSS is not a programming language. Not <em>officially</em>. But it <a
href="https://www.youtube.com/watch?v=-e5nWsGgZXQ">is possible to create
games with only HTML and CSS</a>. And there are even some tutorials on
how to make a specific game: <a
href="https://medium.com/cssclass-com/how-to-create-pure-css-games-2a29c777bf4">a
click ’em all</a>, <a
href="https://css-tricks.com/how-i-made-a-pure-css-puzzle-game/">a
jigsaw</a>, <a href="https://scriptraccoon.dev/blog/create-css-maze">a
maze</a>, and maybe more that I have not found.</p>
<p>My aim here is different. In this series of articles, I want to get
you to experiment with the different techniques that you can use to
create your own games. By the end of each article, you won’t have
created a game, but you will have understood why some things work and
some things don’t.</p>
<p>In this article, you’ll be looking at the following ideas:</p>
<ol type="1">
<li>Using checkboxes and radio buttons to store state</li>
<li>Using animations to change state</li>
<li>Using <code>::before</code> and <code>::after</code>
pseudo-elements</li>
<li>Using <code>z-index</code> to reorder elements</li>
<li>Using the <code>:hover</code> pseudo-class to intercept the actions
of the mouse</li>
<li>Writing selectors that control the logic</li>
<li><strong>Using custom CSS properties</strong></li>
<li><strong>Working with counters</strong></li>
</ol>
<p>My main focus here will be on the last two ideas: understanding how
<strong>CSS custom properties and counters work together</strong>. You
need to use counters, after all, to number things: to show the score or
to display a timer, for example. These are simple ways to add urgency
and excitement to a game. And if you think laterally, you can also get
counters to do some quite unexpected things for you, as you will
see.</p>
<p>I won’t treat the other seven ideas is such great depth here. I’ll be
writing other articles about them specifically.</p>
</section>

<div class="spacer"></div>
<footer id="footer">
<button type="button" id="previous" disabled>&lt;</button>
<span id="previous-name"></span>
<span class="spacer"></span>
<button type="button" id="next">&gt;</button>
<span id="next-name"></span>
</footer>
</main>

<nav
id="menu"
class="open"
>
<div class="paging">
<label
title="Split into sections"
>
<img src="../public/svg/pages.svg" alt="pages">
<input
type="radio"
name="paging"
id="pages"
checked
>
</label>
<label
title="Show as a single page"
>
<img src="../public/svg/scroll.svg" alt="scroll">
<input
type="radio"
name="paging"
id="scroll"
>
</label>
</div>
<svg
id="menu-icon"
viewBox="0 0 100 100"
preserveAspectRatio="xMidYMid meet"
>
<g
class="menu"
stroke-width="20"
stroke-linecap="round"
>
<path
d="M5,20 L5,80 H95 L95,20 z"
fill="#0000"
stroke="none"
/>
<line
x1="15"
y1="20"
x2="85"
y2="20"
/>
<line
x1="15"
y1="50"
x2="85"
y2="50"
/>
<line
x1="15"
y1="80"
x2="85"
y2="80"
/>
</g>
</svg>

<ul id="menu-items">
</ul>

<div id="repo">
<a
href="https://github.com/MERNCraft/Pure-CSS-Games/issues/new"
>
Feedback
</a>

<a
class="repo"
href="https://github.com/MERNCraft/Pure-CSS-Games"
>
<img src="../public/svg/github.svg" alt="github logo">
<span>GitHub repository</span>
</a>
</div>
</nav>
</body>
</html>